<!DOCTYPE html>
<html lang="fr-fr" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.140.1">
    <meta name="generator" content="Relearn 7.2.1+f1701957c30daae7cd133bec5a7968480563ce9f">
    <meta name="description" content="Mes projets">
    <meta name="author" content="Guillaume TALBOT">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Mes projets :: Guillaume TALBOT">
    <meta name="twitter:description" content="Mes projets">
    <meta property="og:url" content="https://talbotgui.github.io/mesprojets/index.html">
    <meta property="og:site_name" content="Guillaume TALBOT">
    <meta property="og:title" content="Mes projets :: Guillaume TALBOT">
    <meta property="og:description" content="Mes projets">
    <meta property="og:locale" content="fr_fr">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Mes projets :: Guillaume TALBOT">
    <meta itemprop="description" content="Mes projets">
    <meta itemprop="dateModified" content="2024-12-29T15:23:22+01:00">
    <meta itemprop="wordCount" content="138">
    <title>Mes projets :: Guillaume TALBOT</title>
    <link href="https://talbotgui.github.io/mesprojets/index.html" rel="canonical" type="text/html" title="Mes projets :: Guillaume TALBOT"><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

    <link href="/css/fontawesome-all.min.css?1735483912" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1735483912" rel="stylesheet"></noscript>
    <link href="/css/auto-complete.css?1735483912" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1735483912" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1735483912" rel="stylesheet">
    <link href="/css/theme.min.css?1735483912" rel="stylesheet">
    <link href="/css/format-print.min.css?1735483912" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='https:\/\/talbotgui.github.io';
      window.relearn.min = `.min`;
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.relearn.themevariants = [ 'blue', 'relearn-light', 'relearn-dark' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant");
        var select = document.querySelector("#R-select-variant");
        if (select) {
          select.value = variant;
        }
      }
      window.relearn.initVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script><style>
    :root {
         
        --MAIN-WIDTH-MAX: 1000rem;
    }

     
    footer {
        border-top: solid 1px;
    }
</style>
  </head>
  <body class="mobile-support print" data-url="/mesprojets/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/index.html"><span itemprop="name">Guillaume TALBOT</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Mes projets</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/mesprojets/index.print.html" title="Print whole chapter (CTRL&#43;ALT&#43;p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/mesidees/99-trucsalire/index.html" title="Trucs √† lire (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/mesprojets/bulletin-guidededev/index.html" title="Bulletin NG - Guide du d√©veloppeur (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable mesprojets" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="mes-projets">Mes projets</h1>

<p>Mes projets publics en cours :</p>
<ul>
<li>une application de gestion d&rsquo;une classe d&rsquo;√©cole primaire avec les informations sur les √©l√®ves, les notes, les comp√©tences √† travailler et le cahier journal (<a href="https://github.com/talbotgui/outilsDeClasse" rel="external" target="_blank">GitHub</a>)
<ul>
<li><a href="/mesprojets/bulletin-guidededev/index.html">guide du d√©veloppeur</a></li>
</ul>
</li>
<li>le pr√©sent site avec mes notes capitalisant des trucs et astuces utiles (<a href="https://github.com/talbotgui/pages-hugo" rel="external" target="_blank">GitHub</a>)</li>
<li>[projet archiv√©] une application de gestion des invit√©s √† un mariage (<a href="https://github.com/talbotgui/mariage" rel="external" target="_blank">GitHub</a>)
<ul>
<li><a href="/mesprojets/mariage-guidededev/index.html">guide du d√©veloppeur</a></li>
</ul>
</li>
</ul>
<p>A c√¥t√© de √ßa, depuis 2021, je travaille seul sur la refonte du SI d&rsquo;un de mes clients. A base d&rsquo;une pile technologique moderne et avec beaucoup de param√©trage (et un √©diteur d√©di√©), j&rsquo;ai d√©velopp√© de quoi remplacer un SI d&rsquo;une cinquantaine de livrables applicatifs Java par une dizaine de micro-services et quelques applications Angular tr√®s simples utilisant une librairie Angular commune.</p>
<p>Le client ne souhaitant pas investir dans ce projet, il sera, prochainement, rendu public.</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Mes projets</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="bulletin-ng---guide-du-d√©veloppeur">Bulletin NG - Guide du d√©veloppeur</h1>

<p>Cette page est mini guide du d√©veloppeur (<a href="/mesidees/10-guidedudev/index.html">ma d√©finition du guide du d√©veloppeur</a>) pour le projet BulletinNg (projet en cours de refonte au 31/12/2024).</p>
<h2 id="1-gestion-de-projet">1/ Gestion de projet</h2>
<p>Aucun suivi des t√¢ches n&rsquo;est en cours pour le moment car les demandes arrivent et sont trait√©es au fil de l&rsquo;eau.</p>
<p>Sont pr√©sents en t√¢ches de fond les √©l√©ments suivants :</p>
<ul>
<li>mettre en oeuvre un maximum des fonctionnalit√©s de Angular, AngularMaterial et des outils de build (NPM, Karma, Jasmine, Protractor, &hellip;).</li>
</ul>
<h2 id="2-exigences">2/ Exigences</h2>
<p>Les exigences sont actuellement fournies par la principale utilisatrice. Aucune formalisation n&rsquo;existe en dehors des quelques lignes ci-dessous.</p>
<h3 id="21-m√©tiers">2.1/ M√©tiers</h3>
<p>Du point de vue m√©tier, le besoin est tr√®s sp√©cifique et ne sera pas d√©taill√©. Les principales contraintes m√©tiers ayant amener √† des choix techniques discutables sont :</p>
<ul>
<li>le caract√®re priv√© des donn√©es n√©cessite que ces derni√®res ne soient pas stock√©es dans une base de donn√©es centralis√©es. L&rsquo;utilisateur a besoin d&rsquo;avoir une maitrise compl√®te de leur stockage.
<ul>
<li>les donn√©es sont donc stock√©es dans un fichier upload√© et t√©l√©charg√© par l&rsquo;utilisateur au d√©but et √† la fin de sa session</li>
<li>les utilisateurs disposant d&rsquo;un serveur de stockage de donn√©es (NAS Network Attached Storage) peuvent l&rsquo;utiliser pour sauvegarder et charger leurs donn√©es (√† eux de s√©curiser leur serveur)</li>
<li>l&rsquo;application ne doit r√©aliser aucun transfert de donn√©es (sauf dans le cas de la sauvegarde sur un serveur qui est le r√©sultat d&rsquo;une action explicite de l&rsquo;utilisateur)</li>
</ul>
</li>
<li>l&rsquo;application doit √™tre s√©curis√©e dans la mesure du possible pour √©viter l&rsquo;injection de script qui pourrait tenter de voler les donn√©es</li>
</ul>
<h3 id="22-techniques">2.2/ Techniques</h3>
<p>Du point de vue technique, l&rsquo;application doit √™tre</p>
<ul>
<li>l&rsquo;accessibilit√© n&rsquo;est pas un besoin car l&rsquo;utilisateur doit avoir ses donn√©es sur son terminal ;</li>
<li>√©volutive : chaque nouveau besoin doit √™tre facilement r√©alis√© pour fournir le service rapidement ;</li>
<li>fiable (point primordiale) : l&rsquo;application ne doit pas subir de r√©gressions intempestives portant atteinte √† son utilisabilit√© ou √† la fiabilit√© de ses donn√©es ;</li>
<li>la structure des donn√©es sauvegard√©es ne doit pas √™tre modifi√©e afin de conserver la r√©trocompatibilit√© avec la pr√©c√©dente application.</li>
</ul>
<h2 id="3-environnement">3/ Environnement</h2>
<p>Ce projet ne compte pas tous les environnements d&rsquo;un projet classique.</p>
<p>(cf. <a href="https://talbotgui.github.io/mesprojets/mariage-guidededev/#environnement" rel="external" target="_blank">chapitre Environnement du guide du d√©veloppeur du projet Mariage</a>)</p>
<h2 id="4-architecture-technique">4/ Architecture technique</h2>
<p>Pour limiter les transferts r√©seau, l&rsquo;application se r√©sume √† un FrontEnd. Afin de simplifier le code et d&rsquo;en augmenter la maintenabilit√©, le d√©veloppement n&rsquo;est pas r√©alis√© en JS/JQuery mais avec Angular (tr√®s bon framework pour faire du binding donn√©es/HTML)</p>
<p>Les tests sont cruciaux dans le cadre de cette application. Donc, sans aller jusqu&rsquo;√† une couverture de code de 100%/100% (en ligne / en branche), toutes les fonctionnalit√©s doivent √™tre test√©es (cf. paragraphe d√©di√© aux tests).</p>
<h2 id="5-tests">5/ Tests</h2>
<h3 id="51-que-tester">5.1/ Que tester</h3>
<p>Les cas nominaux de tous les composants doivent √™tre test√©s ainsi que les cas d&rsquo;erreur principaux.</p>
<p>Aucune exigence n&rsquo;impose une couverture de code particuli√®re mais 80% est souhaitable pour tous les composants contenant de la logique (les services).</p>
<h3 id="52-comment-tester">5.2/ Comment tester</h3>
<p>Jasmine et Ts6-Mockito sont utilis√©s pour les tests unitaires des services.</p>
<p>Protractor est utilis√© pour les tests de bout en bout (e2e - end to end).</p>
<h2 id="6-r√®gles-de-conception">6/ R√®gles de conception</h2>
<h3 id="61-donn√©es">6.1/ Donn√©es</h3>
<p>Le mod√®le de donn√©es ne doit pas √©voluer au point de briser la r√©trocompatibilit√© avec l&rsquo;application pr√©c√©dente.</p>
<h3 id="62-service">6.2/ Service</h3>
<p>Toute logique ou manipulation de donn√©es doit se faire dans un service.</p>
<p>La manipulation du singleton de donn√©es est de la responsabilit√© de DataRepository (ce qui facilite les tests unitaires en offrant un point d&rsquo;entr√©e √† un bouchon).</p>
<p>Les lectures ou agr√©gations de donn√©es doivent se faire dans LectureService.</p>
<p>Les manipulations complexes, non r√©utilisables et propres √† un sous-ensemble du jeu de donn√©es doivent √™tre plac√©s dans un service d√©di√©.</p>
<h3 id="63-composants-angular">6.3/ Composants Angular</h3>
<p>Les composants doivent √™tre les plus simples possibles et limit√©s la duplication de code. Pour cela, les √©l√©ments communs √† tous les √©crans comme la saisie de note ou de comp√©tence doivent √™tre l&rsquo;objet de composant d√©di√©.</p>
<p>Les injections de d√©pendances doivent se faire par la d√©claration d&rsquo;un membre <strong>priv√©</strong> dans le constructeur</p>
<h2 id="7-r√®gles-de-d√©veloppement">7/ R√®gles de d√©veloppement</h2>
<p>Les r√®gles ci-dessous doivent √™tre appliqu√©es par tout d√©veloppeur souhaitant participer √† ce projet (non n√©gociable). <strong>Par contre, il est toujours possible de discuter de la modification d&rsquo;une r√®gle.</strong></p>
<h3 id="71-langue">7.1/ Langue</h3>
<p>Les entit√©s, les attributs et les m√©thodes sont nomm√©s en fran√ßais.
Les pr√©fixes, suffixes et concepts inh√©rents au langage reste en anglais (get, set, is, &hellip;)</p>
<h3 id="72-nommage">7.2/ Nommage</h3>
<p>Les composants applicatifs sont suffix√©s selon les r√®gles d√©finies par Angular :</p>
<ul>
<li>&ldquo;xx.service.ts&rdquo; pour les service (sauf l&rsquo;unique exception de DataRepository) ;</li>
<li>&ldquo;xx.component.ts&rdquo; pour le code TypeScript des composants d&rsquo;IHM ;</li>
<li>&ldquo;xx.component.html&rdquo; pour le code HTML des composants d&rsquo;IHM ;</li>
<li>&ldquo;xx.component.css&rdquo; pour les styles des composants d&rsquo;IHM ;</li>
<li>et &ldquo;xx.spec.ts&rdquo; pour les tests.</li>
</ul>
<p>Parmi les composants d&rsquo;IHM, un pr√©fixe est ajout√© en fonction de l&rsquo;usage et du type de composant :</p>
<ul>
<li>&ldquo;compo-xxx&rdquo; pour les composants r√©utilisables ;</li>
<li>&ldquo;div-xxx&rdquo; pour les cadres pr√©sents dans la page et visibles √† tout instant ;</li>
<li>&ldquo;tab-xxx&rdquo; pour un onglet.</li>
</ul>
<p>Les entit√©s m√©tier et les classes utilitaires ne sont pas suffix√©es mais doivent avoir des noms parlant (l&rsquo;usage du nom d&rsquo;un pattern est utile pour d√©crire l&rsquo;usage/l&rsquo;utilit√© du composant)
Les noms de m√©thode commence par un verbe √† l&rsquo;infinitif</p>
<h3 id="73-mise-en-forme-des-sources">7.3/ Mise en forme des sources</h3>
<p>Microsoft VsCode est l&rsquo;IDE pr√©conis√© m√™me si le plugin pour Eclipse n&rsquo;est pas mal mais plante encore r√©guli√®rement (test√© en aout 2017). La configuration VsCode est pr√©sente dans le repository et les r√®gles de validation TsLint doivent √™tre respect√©es !</p>
<h2 id="8-processus-de-d√©veloppement">8/ Processus de d√©veloppement</h2>
<h3 id="81-gestion-de-configuration-logicielle-gcl">8.1/ Gestion de configuration logicielle (GCL)</h3>
<ul>
<li>Que comprend la GCL :
<ul>
<li>Les sources applicatives et de test sont dans un repository GIT ;</li>
<li>Le pr√©sent &ldquo;guide du d√©veloppeur&rdquo; est lui aussi dans un repository GIT mais s√©par√© (pas de gestion de version coh√©rente n√©cessaire) ;</li>
<li>Le bug tracker a utilis√© est celui du repository GitHub ;</li>
<li>Les plans de test &ldquo;m√©tier&rdquo; ne sont pas formalis√©s. Mais une partie d&rsquo;entre eux sont automatis√©s.</li>
</ul>
</li>
<li>La gestion de version :
<ul>
<li>une seule version existe pour le moment (branche &lsquo;master&rsquo;).</li>
<li>si des POC sont r√©alis√©s, ils doivent l&rsquo;√™tre dans une branche d√©di√©e</li>
<li>aucun TAG n&rsquo;est pos√© pour le moment (c&rsquo;est une chose √† faire prochainement)</li>
<li>l&rsquo;usage de featureBranch est autoris√© et m√™me encourag√©</li>
</ul>
</li>
</ul>
<h3 id="82-commit">8.2/ Commit</h3>
<p>Les messages de commit doivent √™tre explicites.</p>
<h3 id="83-industrialisation">8.3/ Industrialisation</h3>
<h4 id="831-outils">8.3.1/ Outils</h4>
<p>La gestion des exigences est totalement informelle. Ce qui ne pose pas de probl√®me pour ce projet car le d√©lai entre l&rsquo;expression du besoin et la mise en production est court et qu&rsquo;aucune contractualisation n&rsquo;existe (ni sur les moyens ni sur le p√©rim√®tre m√©tier).
GitHub h√©berge une partie des outils du projet : repository GIT &amp; guide du d√©veloppeur, &hellip;
L&rsquo;outil d&rsquo;int√©gration continue utilis√© est Jenkins (h√©berg√© sur un serveur EC2).
La qualim√©trie est r√©alis√©e avec SonarQube (h√©berg√©e sur le site officiel en ligne).
Les relectures de code sont possibles avec GitLab mais ne sont pas utilis√©es actuellement (un seul d√©veloppeur pour le moment)</p>
<h4 id="832-processus">8.3.2/ Processus</h4>
<p>Quitte √† faire un petit projet sympa, autant utiliser les outils correctement. Donc le processus de d√©veloppement (m√™me s&rsquo;il est minimal) est pilot√© par un pipeline (cf. <a href="/mesidees/13-pipeline/index.html">pipeline</a>).
Le pipeline est lui aussi en GCL : dans le <em>JenkinsFile</em>
Le pipeline commence au commit du code et encha√Æne les √©tapes suivantes : compilation, tests m√©tiers, tests E2E, qualim√©trie, promotion manuelle et mise en production</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="mariage---guide-du-d√©veloppeur">Mariage - Guide du d√©veloppeur</h1>

<p>Cette page est un court guide du d√©veloppeur (<a href="/mesidees/10-guidedudev/index.html">ma d√©finition du guide du d√©veloppeur</a>) pour mon projet <a href="https://github.com/talbotgui/mariage" rel="external" target="_blank">Mariage</a>.</p>
<h2 id="1-gestion-de-projet">1/ Gestion de projet</h2>
<p>Un suivi minimaliste des t√¢ches est r√©alis√©s dans le fichier &ldquo;backlog.txt&rdquo; plac√© √† la racine de la branche &ldquo;master&rdquo;. Cette backlog est aliment√©e en fonction des besoins m√©tiers exprim√©s ou des opportunit√©s techniques.</p>
<h2 id="2-exigences">2/ Exigences</h2>
<p>Les exigences sont actuellement fournies par la principale utilisatrice. Aucune formalisation n&rsquo;existe en dehors des quelques lignes ci-dessous.</p>
<h3 id="21--m√©tiers">2.1/  m√©tiers</h3>
<p>Du point de vue m√©tier, le besoin est assez simple : g√©rer les donn√©es d&rsquo;un mariage. Cela comprend :</p>
<ul>
<li>la gestion de
<ul>
<li>la liste des invit√©s,</li>
<li>la liste des diff√©rents courriers,</li>
</ul>
</li>
<li>le suivi de
<ul>
<li>l&rsquo;envoi des courriers,</li>
<li>la r√©ception des r√©ponses,</li>
</ul>
</li>
<li>la planification des √©v√©nements,</li>
<li>le calcul des statistiques n√©cessaires aux mari√©s et prestataires,</li>
<li>le partage de ces informations avec les proches participants √† l&rsquo;organisation (parents, t√©moins, &hellip;)</li>
</ul>
<p>Il existe d√©j√† des sites pour faire tout √ßa. Mais aucun qui nous correspondait exactement. Et tous, syst√©matiquement, sont envahis de publicit√© (<em>donc, en bon geek, j&rsquo;ai fait le mien</em>).</p>
<h3 id="22-techniques">2.2/ techniques</h3>
<p>Du point de vue technique, l&rsquo;application doit √™tre</p>
<ul>
<li>facilement accessible sur tout support : PC, tablette, t√©l√©phone ;</li>
<li>disponible √† tout moment : 24/ 7 sans contrainte temporelle de red√©marrage en cas d&rsquo;arr√™t ;</li>
<li>√©volutive : chaque nouveau besoin doit √™tre facilement r√©alis√© pour fournir le service rapidement √† l&rsquo;utilisatrice principale ;</li>
<li>fiable (point primordiale) : l&rsquo;application ne doit pas subir de r√©gressions intempestives portant atteinte √† son utilisabilit√© ou √† la fiabilit√© de ses donn√©es.</li>
</ul>
<h2 id="3-environnement">3/ Environnement</h2>
<p>Ce projet ne compte pas tous les environnements d&rsquo;un projet classique (comprendre &ldquo;projet d&rsquo;une ESN pour un de ses clients&rdquo;). Comme l&rsquo;√©quipe &ldquo;projet&rdquo; ne comprend qu&rsquo;un seul membre et qu&rsquo;il n&rsquo;existe qu&rsquo;une seule version de l&rsquo;application (pour le moment en tout cas), il n&rsquo;est pas n√©cessaire de pr√©voir plus de 3 environnements (un projet classique en comprend au moins 6) :</p>
<ul>
<li>D√©veloppement &amp; tests :
<ul>
<li>pourquoi : il faut bien coder l&rsquo;application avant de pouvoir l&rsquo;utiliser.</li>
<li>caract√©ristiques : poste Windows avec un Eclipse (N√©on ou sup√©rieur) avec le plugin HibernateTools (cf. <a href="/mesidees/04-consolehibernate/index.html">billet d√©di√©</a>)</li>
<li>diff√©rences notables avec l&rsquo;environnement de production : OS Windows vs Linux en production, pas de reverse-proxy HTTPd ni de HTTPs, pas de manipulation du cache par les ent√™tes HTTP</li>
</ul>
</li>
<li>Int√©gration :
<ul>
<li>pourquoi : aucun d√©veloppeur, m√™me tout seul, n&rsquo;est infaillible. De temps en temps, une r√©gression peut √™tre introduite ou un d√©faut de qualit√© peut √©chapper √† notre vigilance. L&rsquo;int√©gration continue est mon garde-fou et n√©cessite un environnement d√©di√©.</li>
<li>caract√©ristiques : sur la m√™me VM que la production. Donc l&rsquo;application d√©marr√©e durant les tests d&rsquo;int√©gration doit d√©marrer sur un autre port que celle en production.</li>
<li>diff√©rences notables avec l&rsquo;environnement de production : pas de reverse-proxy HTTPd ni de HTTPs, pas de manipulation du cache par les ent√™tes HTTP</li>
</ul>
</li>
<li>Production :
<ul>
<li>pourquoi : pour faire fonctionner l&rsquo;application sur un serveur stable, suffisamment disponible pour r√©pondre aux exigences (cf. ci-dessus) et expos√© √† Internet</li>
<li>caract√©ristiques : Linux maintenu √† jour r√©guli√®rement sur une VM h√©berg√©e par Amazon (EC2)</li>
</ul>
</li>
</ul>
<h2 id="4-architecture-technique">4/ Architecture technique</h2>
<p>En bon d√©veloppeur Java, l&rsquo;application se base sur Hibernate et Spring. Pour ne pas avoir √† installer de composant tiers sur les environnements et parce que les exigences le permettent, l&rsquo;application est autoporteuse avec SpringBoot. Ce dernier d√©marre un serveur WEB (Tomcat) et une base de donn√©es (HSQL) automatiquement.</p>
<p>Pour r√©duire les bugs, rien de tel que de r√©duire le volume de code. Donc SpringData pour la persistance. Ce qui impose l&rsquo;usage de JPA √† la place de l&rsquo;API Hibernate native.</p>
<p>L&rsquo;exposition des services en API REST avec SpringMVC (pour continuer avec Spring et se faciliter l&rsquo;int√©gration des composants).</p>
<p>L&rsquo;application WEB est assez simple (voire simpliste) et se compose principalement de tableaux de donn√©es charg√©es depuis l&rsquo;API REST. Une application Angular eut √©t√© possible mais, vu le besoin, une simple application avec JQuery, JQueryUI et JQxgrid a √©t√© retenue.</p>
<p>Les tests sont cruciaux dans le cadre de cette application. Donc, sans aller jusqu&rsquo;√† une couverture de code de 100%/100% (en ligne / en branche), toutes les fonctionnalit√©s doivent √™tre test√©es sur toutes les couches (cf. paragraphe d√©di√© aux tests).</p>
<h2 id="5-tests">5/ Tests</h2>
<h3 id="51-que-tester">5.1/ Que tester</h3>
<p>Les cas nominaux de tous les composants doivent √™tre test√©s ainsi que les cas d&rsquo;erreur principaux.</p>
<p>Aucune exigence n&rsquo;impose une couverture de code particuli√®re mais 80% est souhaitable pour tous les composants contenant de la logique (hors getter, setter, constructeur, code de <a href="/mesidees/11-programmationdefensive/index.html">programmation d√©fensive</a>, &hellip;)</p>
<h3 id="52-comment-tester">5.2/ Comment tester</h3>
<p><strong>Les composants m√©tiers</strong> (Service, Repostitory et Entit√©) doivent √™tre test√©s avec des tests d&rsquo;int√©gration. Il n&rsquo;est pas concevable de tester un syst√®me enti√®rement bas√© sur la notion de transaction et de requ√™tes SQL (Spring, Hibernate et la BDD) sans une connexion √† une base de donn√©es et sans activer les commits.</p>
<p>Si certains composants m√©tiers pr√©sentent une grande complexit√©, alors un <a href="/mesidees/03-testsdedeveloppement/index.html">test de granularit√© unitaire</a> est tout √† fait envisageable. Un tel composant n&rsquo;existe pas pour le moment.</p>
<p><strong>Les contr√¥leurs REST</strong> doivent √™tre test√©s unitairement. Ces composants ne sont pas transactionnels et les services sont test√©s par ailleurs. Mais, pour bien v√©rifier le param√©trage et le code, il est n√©cessaire de r√©aliser le test des contr√¥leurs en d√©marrant un serveur WEB (l&rsquo;adjectif &ldquo;unitaire&rdquo; utilis√© plus t√¥t est donc discutable - cf. <a href="/mesidees/03-testsdedeveloppement/index.html">test de d√©veloppement</a>).</p>
<p><strong>Les √©crans</strong> de l&rsquo;application sont test√©s en mode &ldquo;bout en bout&rdquo;. Selenium est utilis√© pour piloter le navigateur et un jeu de donn√©es est utilis√© pour initialiser le test. ATTENTION : les tests Selenium ne sont donc pas tous ind√©pendants les uns des autres. Ce n&rsquo;est pas une bonne pratique mais faire autrement avec un test de bout en bout est trop co√ªteux.</p>
<h3 id="53-avec-quels-outils">5.3/ Avec quels outils</h3>
<p><strong>JUnit</strong> et <strong>TestNG</strong> sont tous deux des ex√©cuteurs de tests. JUnit est utilis√© dans les tests des composants m√©tiers. TestNG, √©tant plus pratique √† utiliser avec Mockito, est utilis√© pour l&rsquo;ex√©cution des tests des contr√¥leurs.</p>
<p><strong>Mockito</strong> est donc utilis√© pour bouchonner les services m√©tiers dans les tests des contr√¥leurs.</p>
<p>La classe utilitaire <strong>JdbcTemplate</strong> (fournie par Spring-jdbc) peut √™tre utilis√©e dans les tests m√©tiers afin d&rsquo;ex√©cuter simplement des requ√™tes SQL en base de donn√©es pour valider le contenu.</p>
<p>La classe utilitaire <strong>RestTemplate</strong> (fournie par Spring-web) peut √™tre utilis√©e dans les tests des contr√¥leurs pour r√©aliser les appels HTTP simplement.</p>
<p><strong>Selenium</strong> est une API tr√®s riche. La classe MyDriver rassemble les op√©rations usuelles utiles aux tests (il est tout √† fait possible de l&rsquo;enrichir).
Les s√©lecteurs √† utiliser dans les tests Selenium sont tous rassembl√©s dans la classe Selectors. Tous les s√©lecteurs doivent √™tre rassembl√©s dans cette classe.
Cette classe contient une hi√©rarchie de sous-classes structur√©e ainsi : NomDeLaPage / TypeDelements / selecteurElement. Exemple : Index.Button.CONFIRMER_SUPPRESSION
Toute modification d&rsquo;une page HTML doit entra√Æner l&rsquo;enrichissement de la classe Selectors avec le s√©lecteur permettant de s√©lectionner les √©l√©ments ajout√©s/modifi√©s/supprim√©s.</p>
<h2 id="6-r√®gles-de-conception">6/ R√®gles de conception</h2>
<h3 id="61-persistance">6.1/ Persistance</h3>
<p>Toute requ√™te de recherche sans param√®tre optionnel doit √™tre cod√©e dans un repository SpringData.</p>
<h3 id="62-service">6.2/ Service</h3>
<p>La gestion des transactions et des erreurs se traite au niveau des services qui sont les points d&rsquo;entr√©e et de sortie des transactions.</p>
<h3 id="63-api">6.3/ API</h3>
<p>Les services ne sont expos√©s via l&rsquo;API que s&rsquo;ils sont utilis√©s par l&rsquo;IHM.
La validation des param√®tres d&rsquo;entr√©e se fait dans le &ldquo;contr√¥leur&rdquo;.
La transformation des entit√©s en DTO se fait dans le &ldquo;contr√¥leur&rdquo; (dont c&rsquo;est la responsabilit√©).</p>
<h3 id="64-web---pages">6.4/ WEB - Pages</h3>
<p>Les tableaux de donn√©es sont r√©alis√©s avec le plugin JQxGrid.
Dans un premier temps, les filtres, paginations et tris sont r√©alis√©s du cot√© client (par le framework).
Une fois l&rsquo;usage courant du tableau d√©fini, les bons filtres et tris (et donc aussi la pagination) doivent √™tre impl√©ment√©s cot√© serveur.</p>
<h3 id="65web---js">6.5WEB - JS</h3>
<p>Aucun script ne doit √™tre pr√©sent dans la page HTML. A chaque page est associ√© un script. Les √©l√©ments communs √† toutes les pages sont dans le script <em>common.js</em>.</p>
<h2 id="7-r√®gles-de-d√©veloppement">7/ R√®gles de d√©veloppement</h2>
<p>Les r√®gles ci-dessous doivent √™tre appliqu√©es par tout d√©veloppeur souhaitant participer √† ce projet (non n√©gociable). <strong>Par contre, il est toujours possible de discuter de la modification d&rsquo;une r√®gle.</strong></p>
<h3 id="71-langue">7.1/ Langue</h3>
<p>Les entit√©s, les attributs et les m√©thodes sont nomm√©s en fran√ßais.
Les pr√©fixes, suffixes et concepts inh√©rents au langage reste en anglais (get, set, is, iterator, &hellip;)</p>
<h3 id="72-nommage">7.2/ Nommage</h3>
<p>Les composants applicatifs sont suffix√©s en fonction de leur type :</p>
<ul>
<li>&ldquo;Application&rdquo; pour les configurations SpringBoot,</li>
<li>&ldquo;Exception&rdquo; pour les exceptions,</li>
<li>&ldquo;DTO&rdquo; pour les structures de donn√©es de transport,</li>
<li>&ldquo;Service&rdquo; pour les services m√©tiers,</li>
<li>&ldquo;DAO&rdquo; pour l&rsquo;acc√®s √† la persistance,</li>
<li>&ldquo;contr√¥leur&rdquo; pour l&rsquo;exposition de service en REST</li>
<li>et &ldquo;Test&rdquo; pour tous les tests</li>
</ul>
<p>Les entit√©s m√©tier et les classes utilitaires ne sont pas suffix√©es mais doivent avoir des noms parlant (l&rsquo;usage du nom d&rsquo;un pattern est utile pour d√©crire l&rsquo;usage/l&rsquo;utilit√© du composant)
Les classes impl√©mentant une interface sont suffix√©es par &ldquo;IMPL&rdquo;
Les noms de m√©thode commence par un verbe √† l&rsquo;infinitif</p>
<h3 id="73-mise-en-forme-des-sources">7.3/ Mise en forme des sources</h3>
<p>L&rsquo;usage des Save Actions d&rsquo;Eclipse est obligatoire pour conserver l&rsquo;homog√©n√©it√© du code (cf. <a href="/mesprojets/mariage-guidededev/index.html">petit tour d&rsquo;Eclipse</a>)</p>
<p>Le formatage des sources est celui par d√©faut dans Eclipse (version N√©on) : 120 caract√®res par ligne (80 pour les commentaires) et indentation par tabulation.
Les membres sont tri√©s syst√©matiquement.
Les lignes ne contenant que des tabulations et/ou des espaces sont vid√©es.
Le mot clef &ldquo;final&rdquo; est plac√© sur toutes les variables affect√©es une seule fois et sur les param√®tres.
Le mot clef &ldquo;this&rdquo; est utilis√© syst√©matiquement.
Les cast inutiles sont supprim√©s.</p>
<h3 id="74-hql">7.4/ HQL</h3>
<p>Les requ√™tes HQL simples peuvent √™tre √©crites sur une seule ligne. Les plus complexes sont format√©es pour √™tre plus lisible. L&rsquo;usage des commentaires &ldquo;//&rdquo; en fin de ligne est autoris√© pour forcer Eclipse √† conserver √† la ligne la cha√Æne de caract√®re √† concat√©ner.</p>
<p>Toujours d√©finir par d√©faut l&rsquo;attribut READ_ONLY √† <em>true</em> sur une m√©thode chargeant des entit√©s persistantes. Seules les entit√©s n√©cessitant d&rsquo;√™tre &ldquo;managed&rdquo; doivent l&rsquo;√™tre (cf. documentation hibernate sur le cycle de vie des objets dans une session)
Ne jamais cr√©er un lien entre deux entit√©s en instanciant une entit√© et ne d√©finissant que son ID. Toujours utiliser <em>EntityManager.getReference</em>
La gestion des transactions est faite via les annotations Spring. Les exceptions du projet sont <em>runtime</em> et d√©clenchent donc le rollback. Seuls les composants de type &ldquo;Service&rdquo; et &ldquo;DAO&rdquo; peuvent √™tre transactionnels (par les &ldquo;contr√¥leur&rdquo;)</p>
<h2 id="8-processus-de-d√©veloppement">8/ Processus de d√©veloppement</h2>
<h3 id="81-gestion-de-configuration-logicielle-gcl">8.1/ Gestion de configuration logicielle (GCL)</h3>
<ul>
<li>Que comprend la GCL :
<ul>
<li>Les sources applicatives et de test sont dans un repository GIT ;</li>
<li>Le pr√©sent &ldquo;guide du d√©veloppeur&rdquo; est lui aussi dans un repository GIT mais s√©par√© (pas de gestion de version coh√©rente n√©cessaire) ;</li>
<li>Le bug tracker a utilis√© est celui du repository GitHub ;</li>
<li>Les plans de test &ldquo;m√©tier&rdquo; ne sont pas formalis√©s. Mais une partie d&rsquo;entre eux sont automatis√©s avec Selenium.</li>
</ul>
</li>
<li>La gestion de version :
<ul>
<li>une seule version existe pour le moment (branche &lsquo;master&rsquo;).</li>
<li>si des POC sont r√©alis√©s, ils doivent l&rsquo;√™tre dans une branche d√©di√©e</li>
<li>aucun TAG n&rsquo;est pos√© pour le moment (c&rsquo;est une chose √† faire prochainement)</li>
</ul>
</li>
</ul>
<h3 id="82-commit">8.2/ Commit</h3>
<p>Les messages de commit doivent √™tre explicites. Toute nouvelle fonctionnalit√© doit √™tre commit√©e avec un message commen√ßant par &ldquo;[FEATURE]&rdquo; (afin que le commit soit correctement affich√© dans la page <em>releaseNote</em> de l&rsquo;application).</p>
<h2 id="9-industrialisation">9/ Industrialisation</h2>
<h4 id="91-outils">9.1/ Outils</h4>
<p>La gestion des exigences est totalement informelle. Ce qui ne pose pas de probl√®me pour ce projet car le d√©lai entre l&rsquo;expression du besoin et la mise en production est court et qu&rsquo;aucune contractualisation n&rsquo;existe (ni sur les moyens ni sur le p√©rim√®tre m√©tier).
GitHub h√©berge une partie des outils du projet : repository GIT &amp; guide du d√©veloppeur, &hellip;
L&rsquo;outil d&rsquo;int√©gration continue utilis√© est Jenkins (h√©berg√© sur un serveur EC2).
La qualim√©trie est r√©alis√©e avec Sonar (h√©berg√©e sur le site officiel en ligne).
Les relectures de code sont possibles avec GitLab mais ne sont pas utilis√©es actuellement (un seul d√©veloppeur pour le moment)</p>
<h4 id="92-processus">9.2/ Processus</h4>
<p>Quitte √† faire un petit projet sympa, autant utiliser les outils correctement. Donc le processus de d√©veloppement (m√™me s&rsquo;il est minimal) est pilot√© par un pipeline (cf. <a href="/mesidees/13-pipeline/index.html">pipeline</a>).
Le pipeline est lui aussi en GCL : dans le <em>JenkinsFile</em>
Le pipeline commence au commit du code et encha√Æne les √©tapes suivantes : compilation, tests m√©tiers, tests des contr√¥leurs, packaging, tests IHM, qualim√©trie, promotion manuelle et mise en production</p>
<p>Sujets non trait√©s ici (le projet est termin√©, ce guide n&rsquo;√©voluera plus) :</p>
<ul>
<li>conception
<ul>
<li>quels sont les outils de conception et/ou de mod√©lisation ?</li>
<li>quels sont les objectifs des mod√®les (compr√©hension, communication, ‚Ä¶) et quelle est leur dur√©e de vie ?</li>
<li>r√®gles de conception (programmation d√©fensive, @designByContrat, modularit√©, &hellip;)</li>
<li>jeu de donn√©es de test</li>
</ul>
</li>
<li>d√©veloppement
<ul>
<li>liste des frameworks disponibles, leur usage et le pointeur sur leur documentation</li>
<li>qualim√©trie obligatoire avec le site &ldquo;online&rdquo; (avec sa configuration impos√©e par la plateforme d&rsquo;o√π les violations non corrig√©e qui ne le seront pas)</li>
<li>HQL propre</li>
<li>code en fran√ßais</li>
<li>m√©thode = verbe √† l&rsquo;infinitif</li>
<li>largeur 120 (on a tous des r√©solutions d&rsquo;√©cran suffisante)</li>
<li>&hellip;</li>
</ul>
</li>
<li>industrialisation :
<ul>
<li>aucune installation de poste automatique car seul l&rsquo;IDE est n√©cessaire et l&rsquo;application est autoporteuse</li>
<li>IC = jenkins toujours √† jour avec un pipelineAsCode (lien vers le blog sur le sujet)</li>
<li>pipeline = git/compile/TU/TI/TA/qualim√©trie/promotion/production</li>
<li>√† quand un second d√©veloppeur et la mise en place des pullrequest et des revues de code ?</li>
</ul>
</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="application-blanche">Application Blanche</h1>

<p>Cette page est un court guide du d√©veloppeur (<a href="/mesidees/10-guidedudev/index.html">ma d√©finition du guide du d√©veloppeur</a>) pour un projet assez particulier : une <a href="https://github.com/talbotgui/appliBlanche" rel="external" target="_blank">Application Blanche</a>.</p>
<p>L&rsquo;objectif de l&rsquo;application blanche est de fournir un exemple d&rsquo;application (r√©guli√®rement utilis√© quand je donne des formations) mais aussi une structure minimale pour cr√©er une nouvelle application. A ce titre, l&rsquo;application doit √™tre particuli√®rement bien cod√©e (dans le fond comme dans la forme) mais aussi bien document√©e (il y a du boulot de ce cot√©-l√†).</p>
<h2 id="1-exigences">1/ Exigences</h2>
<p>Le fichier &ldquo;todoList.txt&rdquo; pr√©sent √† la racine de la branche <em>master</em> contient une backlog.</p>
<h3 id="11-m√©tiers">1.1/ m√©tiers</h3>
<p>L&rsquo;application n&rsquo;a pas d&rsquo;objectif m√©tier.</p>
<h3 id="12-techniques">1.2/ techniques</h3>
<p>Les sources √©voluent au gr√®s des besoins techniques que je veux prototyper et/ou des nouveaux usages/frameworks que je d√©couvre.</p>
<p>Mais, l&rsquo;application doit tout de m√™me r√©pondre aux exigences suivantes :</p>
<ul>
<li>facilement accessible sur tout support : PC, tablette, t√©l√©phone ;</li>
<li>√©volutive : chaque nouveau besoin doit √™tre facilement r√©alis√© (toujours rest√© sur des solutions simples et efficaces) ;</li>
<li>fiable (point primordiale) : l&rsquo;application ne doit pas subir de r√©gressions intempestives portant atteinte √† son utilisabilit√© ou √† la fiabilit√© de ses donn√©es.</li>
</ul>
<h2 id="2-environnement">2/ Environnement</h2>
<p>Ce projet n&rsquo;√©tait pas d√©ploy√© o√π que ce soit jusqu&rsquo;en septembre 2018. Avant cette date, seule la PIC d√©marre l&rsquo;application √† travers les tests (unitaires, d&rsquo;int√©gration et d&rsquo;application).
Depuis cette date, l&rsquo;application est d√©ploy√©e sur le serveur Unix et sera bient√¥t d√©ploy√©e sur le cloud de Google (GCP).</p>
<h2 id="3-architecture-technique">3/ Architecture technique</h2>
<p>Cette application se compose :</p>
<ul>
<li>d&rsquo;un backend coup√© en quatre modules :
<ul>
<li>un projet contenant les classes r√©utilisables pour les projets &ldquo;m√©tiers&rdquo;</li>
<li>un projet contenant les classes r√©utilisables pour les projets &ldquo;REST&rdquo;</li>
<li>un projet de services m√©tiers et de persistence</li>
<li>un projet de composants REST s√©curis√©s (avec JWT)</li>
</ul>
</li>
<li>d&rsquo;une application WEB d√©velopp√©e avec Angular</li>
<li>de la m√™me application WEB (m√™me √©crans et fonctionnalit√©s) d√©velopp√©e avec VueJS</li>
<li>de batch (simple en SQL et une autre avec JPA)</li>
</ul>
<p>Les applications WEB sont simples (voire simpliste) et mettent en oeuvre des composants diff√©rents pour faire des tests :</p>
<ul>
<li>un formulaire Material</li>
<li>l&rsquo;internationnalisation avec des libell√©s venant d&rsquo;une API</li>
<li>une application PWA</li>
<li>table Material</li>
<li>&hellip;</li>
</ul>
<h2 id="4-tests">4/ Tests</h2>
<h3 id="41-que-tester">4.1/ Que tester</h3>
<p>Les cas nominaux de tous les composants doivent √™tre test√©s ainsi que les cas d&rsquo;erreur principaux.</p>
<p>Aucune exigence n&rsquo;impose une couverture de code particuli√®re mais 80% est souhaitable pour tous les composants contenant de la logique (hors getter, setter, constructeur, code de <a href="/mesidees/11-programmationdefensive/index.html">programmation d√©fensive</a>, &hellip;)</p>
<h3 id="42-comment-tester">4.2/ Comment tester</h3>
<p><strong>Les composants m√©tiers</strong> (Service, Repostitory et Entit√©) doivent √™tre test√©s avec des tests d&rsquo;int√©gration. Il n&rsquo;est pas concevable de tester un syst√®me enti√®rement bas√© sur la notion de transaction et de requ√™tes SQL (Spring, Hibernate et la BDD) sans une connexion √† une base de donn√©es et sans activer les commits.</p>
<p>Si certains composants m√©tiers pr√©sentent une grande complexit√©, alors un <a href="/mesidees/03-testsdedeveloppement/index.html">test de granularit√© unitaire</a> est tout √† fait envisageable. Un tel composant n&rsquo;existe pas pour le moment.</p>
<p><strong>Les contr√¥leurs REST</strong> doivent √™tre test√©s unitairement. Ces composants ne sont pas transactionnels et les services sont test√©s par ailleurs. Mais, pour bien v√©rifier le param√©trage et le code, il est n√©cessaire de r√©aliser le test des contr√¥leurs en d√©marrant un serveur WEB (l&rsquo;adjectif &ldquo;unitaire&rdquo; utilis√© plus t√¥t est donc discutable - cf. <a href="/mesidees/03-testsdedeveloppement/index.html">test de d√©veloppement</a>).</p>
<p><strong>Les √©crans</strong> de l&rsquo;application sont test√©s en mode &ldquo;bout en bout&rdquo;. Selenium est utilis√© pour piloter le navigateur et un jeu de donn√©es est utilis√© pour initialiser le test. ATTENTION : les tests Selenium ne sont donc pas tous ind√©pendants les uns des autres. Ce n&rsquo;est pas une bonne pratique mais faire autrement avec un test de bout en bout est trop co√ªteux.</p>
<h3 id="avec-quels-outils">Avec quels outils</h3>
<p><strong>JUnit</strong> et <strong>TestNG</strong> sont tous deux des ex√©cuteurs de tests. JUnit est utilis√© dans les tests des composants m√©tiers. TestNG, √©tant plus pratique √† utiliser avec Mockito, est utilis√© pour l&rsquo;ex√©cution des tests des contr√¥leurs.</p>
<p><strong>Mockito</strong> est donc utilis√© pour bouchonner les services m√©tiers dans les tests des contr√¥leurs.</p>
<p>La classe utilitaire <strong>JdbcTemplate</strong> (fournie par Spring-jdbc) peut √™tre utilis√©e dans les tests m√©tiers afin d&rsquo;ex√©cuter simplement des requ√™tes SQL en base de donn√©es pour valider le contenu.</p>
<p>La classe utilitaire <strong>RestTemplate</strong> (fournie par Spring-web) peut √™tre utilis√©e dans les tests des contr√¥leurs pour r√©aliser les appels HTTP simplement.</p>
<p><strong>Selenium</strong> est une API tr√®s riche. La classe MyDriver rassemble les op√©rations usuelles utiles aux tests (il est tout √† fait possible de l&rsquo;enrichir).
Les s√©lecteurs √† utiliser dans les tests Selenium sont tous rassembl√©s dans la classe Selectors. Tous les s√©lecteurs doivent √™tre rassembl√©s dans cette classe.
Cette classe contient une hi√©rarchie de sous-classes structur√©e ainsi : NomDeLaPage / TypeDelements / selecteurElement. Exemple : Index.Button.CONFIRMER_SUPPRESSION
Toute modification d&rsquo;une page HTML doit entra√Æner l&rsquo;enrichissement de la classe Selectors avec le s√©lecteur permettant de s√©lectionner les √©l√©ments ajout√©s/modifi√©s/supprim√©s.</p>
<h2 id="5-r√®gles-de-conception">5/ R√®gles de conception</h2>
<h3 id="51-persistance">5.1/ Persistance</h3>
<p>Toute requ√™te de recherche sans param√®tre optionnel doit √™tre cod√©e dans un repository SpringData.</p>
<h3 id="52-service">5.2/ Service</h3>
<p>La gestion des transactions et des erreurs se traite au niveau des services qui sont les points d&rsquo;entr√©e et de sortie des transactions.</p>
<h3 id="53-api">5.3/ API</h3>
<p>Les services ne sont expos√©s via l&rsquo;API que s&rsquo;ils sont utilis√©s par l&rsquo;IHM.
La validation des param√®tres d&rsquo;entr√©e se fait dans le &ldquo;contr√¥leur&rdquo; et dans l&rsquo;√©cran.</p>
<h2 id="6-r√®gles-de-d√©veloppement">6/ R√®gles de d√©veloppement</h2>
<p>Les r√®gles ci-dessous doivent √™tre appliqu√©es par tout d√©veloppeur souhaitant participer √† ce projet (non n√©gociable). <strong>Par contre, il est toujours possible de discuter de la modification d&rsquo;une r√®gle.</strong></p>
<h3 id="61-langue">6.1/ Langue</h3>
<p>Les entit√©s, les attributs et les m√©thodes sont nomm√©s en fran√ßais.
Les commentaire sont en fran√ßais.
Les pr√©fixes, suffixes et concepts inh√©rents au langage reste en anglais (get, set, is, iterator, &hellip;)</p>
<h3 id="62-nommage">6.2/ Nommage</h3>
<p>Les composants applicatifs sont suffix√©s en fonction de leur type :</p>
<ul>
<li>&ldquo;Application&rdquo; pour les configurations SpringBoot,</li>
<li>&ldquo;Exception&rdquo; pour les exceptions,</li>
<li>&ldquo;DTO&rdquo; pour les structures de donn√©es de transport,</li>
<li>&ldquo;Service&rdquo; pour les services m√©tiers,</li>
<li>&ldquo;DAO&rdquo; pour l&rsquo;acc√®s √† la persistance,</li>
<li>&ldquo;REST&rdquo; pour l&rsquo;exposition de service en REST</li>
<li>et &ldquo;Test&rdquo; pour tous les tests</li>
</ul>
<p>Les entit√©s m√©tier et les classes utilitaires ne sont pas suffix√©es mais doivent avoir des noms parlant (l&rsquo;usage du nom d&rsquo;un pattern est utile pour d√©crire l&rsquo;usage/l&rsquo;utilit√© du composant)
Les classes impl√©mentant une interface sont suffix√©es par &ldquo;IMPL&rdquo;
Les noms de m√©thode commence par un verbe √† l&rsquo;infinitif</p>
<h3 id="63-mise-en-forme-des-sources">6.3/ Mise en forme des sources</h3>
<p>L&rsquo;usage des Save Actions d&rsquo;Eclipse est obligatoire pour conserver l&rsquo;homog√©n√©it√© du code (cf. <a href="/mesprojets/applicationblanche/index.html">petit tour d&rsquo;Eclipse</a>)</p>
<p>Le formatage des sources est celui par d√©faut dans Eclipse (version Oxygen) : 150 caract√®res par ligne (150 pour les commentaires) et indentation par tabulation.
Les membres sont tri√©s syst√©matiquement.
Les lignes ne contenant que des tabulations et/ou des espaces sont vid√©es.
Le mot clef &ldquo;final&rdquo; est plac√© sur toutes les variables affect√©es une seule fois et sur les param√®tres.
Le mot clef &ldquo;this&rdquo; est utilis√© syst√©matiquement.
Les cast inutiles sont supprim√©s.</p>
<h3 id="64-hql">6.4/ HQL</h3>
<p>Les requ√™tes HQL simples peuvent √™tre √©crites sur une seule ligne. Les plus complexes sont format√©es pour √™tre plus lisible. L&rsquo;usage des commentaires &ldquo;//&rdquo; en fin de ligne est autoris√© pour forcer Eclipse √† conserver √† la ligne la cha√Æne de caract√®re √† concat√©ner.</p>
<p>Toujours d√©finir par d√©faut l&rsquo;attribut READ_ONLY √† <em>true</em> sur une m√©thode chargeant des entit√©s persistantes. Seules les entit√©s n√©cessitant d&rsquo;√™tre &ldquo;managed&rdquo; doivent l&rsquo;√™tre (cf. documentation hibernate sur le cycle de vie des objets dans une session)
Ne jamais cr√©er un lien entre deux entit√©s en instanciant une entit√© et ne d√©finissant que son ID. Toujours utiliser <em>EntityManager.getReference</em>
La gestion des transactions est faite via les annotations Spring. Les exceptions du projet sont <em>runtime</em> et d√©clenchent donc le rollback. Seuls les composants de type &ldquo;Service&rdquo; et &ldquo;DAO&rdquo; peuvent √™tre transactionnels (par les &ldquo;contr√¥leur&rdquo;)</p>
<h3 id="65-spring-data">6.5/ Spring Data</h3>
<p>Les requ√™tes sont, pour la quasi totalit√© d&rsquo;entre elles, positionn√©es dans un Repository Spring Data. Elles sont donc dans les annotations d&rsquo;une interface et non dans une classe.
L&rsquo;usage de m√©thode <em>default</em> est interdit sur mon projet. Si je dois coder un algorithme, il doit √™tre dans le service. Si la requ√™te est compl√®xe (multi-crit√®res optionnels par exemple), il faut cr√©er une classe √† part.</p>
<p>Astuces et penses-b√™tes :</p>
<ul>
<li>ne jamais mettre de clause <em>order by</em> dans une requ√™te si la requ√™te est pagin√©e (usage d&rsquo;un param√®tre de type org.springframework.data.domain.Pageable)</li>
<li>toujours d√©finir la requ√™te <em>countQuery</em> d&rsquo;une requ√™te pagin√©e si la requ√™te contient un <em>join fetch</em></li>
</ul>
<h3 id="66-rest">6.6/ REST</h3>
<p>Les m√©thodes de contr√¥leur REST retournant uniquement une chaine de caract√®res doivent retourner la dite chaine entre <em>double quote</em>.</p>
<h2 id="7-processus-de-d√©veloppement">7/ Processus de d√©veloppement</h2>
<h3 id="71-gestion-de-configuration-logicielle-gcl">7.1/ Gestion de configuration logicielle (GCL)</h3>
<ul>
<li>Que comprend la GCL :
<ul>
<li>Les sources applicatives et de test sont dans un repository GIT ;</li>
<li>Le pr√©sent &ldquo;guide du d√©veloppeur&rdquo; est lui aussi dans un repository GIT mais s√©par√© (pas de gestion de version coh√©rente n√©cessaire) ;</li>
<li>Le bug tracker a utilis√© est celui du repository GitHub ;</li>
<li>Les plans de test &ldquo;m√©tier&rdquo; ne sont pas formalis√©s. Mais une partie d&rsquo;entre eux sont automatis√©s avec Selenium.</li>
</ul>
</li>
<li>La gestion de version :
<ul>
<li>une seule version existe pour le moment (branche &lsquo;master&rsquo;).</li>
<li>si des POC sont r√©alis√©s, ils doivent l&rsquo;√™tre dans une branche d√©di√©e</li>
<li>aucun TAG n&rsquo;est pos√© pour le moment (c&rsquo;est une chose √† faire prochainement)</li>
</ul>
</li>
</ul>
<h3 id="72-commit">7.2/ Commit</h3>
<p>Les messages de commit doivent √™tre explicites. Toute nouvelle fonctionnalit√© doit √™tre commit√©e avec un message commen√ßant par &ldquo;[FEATURE]&rdquo; (afin que le commit soit correctement affich√© dans la page <em>releaseNote</em> de l&rsquo;application).</p>
<h3 id="73-industrialisation">7.3/ Industrialisation</h3>
<h4 id="731-outils">7.3.1/ Outils</h4>
<p>GitHub h√©berge une partie des outils du projet : repository GIT &amp; guide du d√©veloppeur, &hellip;
L&rsquo;outil d&rsquo;int√©gration continue utilis√© est Jenkins (h√©berg√© sur un serveur EC2).
La qualim√©trie est r√©alis√©e avec Sonar (h√©berg√©e sur le site officiel en ligne).
Les relectures de code sont possibles avec GitHub mais ne sont pas utilis√©es actuellement (un seul d√©veloppeur pour le moment)</p>
<h4 id="732-processus">7.3.2/ Processus</h4>
<p>Quitte √† faire un petit projet sympa, autant utiliser les outils correctement. Donc le processus de d√©veloppement (m√™me s&rsquo;il est minimal) est pilot√© par un pipeline (cf. <a href="/mesidees/13-pipeline/index.html">pipeline</a>).
Le pipeline est lui aussi en GCL : dans le <em>JenkinsFile</em>
Le pipeline commence au commit du code et encha√Æne les √©tapes suivantes : compilation, tests m√©tiers, tests des contr√¥leurs, packaging, tests IHM, qualim√©trie, promotion manuelle et mise en production</p>
<h2 id="8-installation-des-environnements">8/ Installation des environnements</h2>
<h3 id="81-sur-le-serveur-unix">8.1/ Sur le serveur unix</h3>
<p>Le d√©ploiement sur un serveur Unix demande la cr√©ation</p>
<ul>
<li>d&rsquo;un r√©pertoire h√©bergeant l&rsquo;application WEB dans un sous r√©pertoire de /var/www/html.
<ul>
<li>Attention √† bien changer le root dans la configuration du build pour prendre en compte le nom du sous r√©pertoire dans /var/www/html/.</li>
<li>De plus, il faut donner les droits √† l&rsquo;utilisateur Jenkins d&rsquo;√©crire dans ce r√©pertoire.</li>
<li>Enfin, il faut modifier le fichier de configuration Apache pour permettre le chargement du WORKER : <code>Header set Content-Security-Policy &quot;worker-src https://*.guillaumetalbot.com;&quot;</code></li>
</ul>
</li>
<li>d&rsquo;un r√©pertoire h√©bergeant le Backend
<ul>
<li>Le r√©pertoire doit contenir des scripts de d√©marrage et d&rsquo;arr√™t (cf. sources de l&rsquo;application)</li>
<li>Le r√©pertoire doit aussi contenir les fichiers de configuration propres √† l&rsquo;environnement (log4j2.xml et application.properties)</li>
<li>De plus, il faut donner les droits √† l&rsquo;utilisateur Jenkins d&rsquo;√©crire dans ce r√©pertoire pour le JAR, les logs et la bases de donn√©es (attention aux fichiers cr√©√©s par un autre compte que Jenkins !).</li>
<li>Il ne faut pas oublier d&rsquo;ajouter les redirections dans la configuration Apache !!</li>
</ul>
</li>
</ul>
<p>Sujets non trait√©s ici (pour le moment) :</p>
<ul>
<li>conception
<ul>
<li>quels sont les outils de conception et/ou de mod√©lisation ?</li>
<li>quels sont les objectifs des mod√®les (compr√©hension, communication, ‚Ä¶) et quelle est leur dur√©e de vie ?</li>
<li>r√®gles de conception (programmation d√©fensive, @designByContrat, modularit√©, &hellip;)</li>
<li>jeu de donn√©es de test</li>
</ul>
</li>
<li>d√©veloppement
<ul>
<li>liste des frameworks disponibles, leur usage et le pointeur sur leur documentation</li>
<li>qualim√©trie obligatoire avec le site &ldquo;online&rdquo; (avec sa configuration impos√©e par la plateforme d&rsquo;o√π les violations non corrig√©e qui ne le seront pas)</li>
<li>HQL propre</li>
<li>&hellip;</li>
</ul>
</li>
<li>industrialisation :
<ul>
<li>aucune installation de poste automatique car seul l&rsquo;IDE est n√©cessaire et l&rsquo;application est autoporteuse</li>
<li>IC = jenkins toujours √† jour avec un pipelineAsCode (lien vers le blog sur le sujet)</li>
<li>pipeline = git/compile/TU/TI/TA/qualim√©trie/promotion/production</li>
<li>√† quand un second d√©veloppeur et la mise en place des pullrequest et des revues de code ?</li>
</ul>
</li>
<li>roadmap :
<ul>
<li>tag √† la promotion (fin du d√©veloppement au fil de l&rsquo;eau et passage en mode paquet de code)</li>
<li>&hellip;</li>
</ul>
</li>
</ul>
<h2 id="9-faq">9/ FAQ</h2>
<ul>
<li>Erreur de s√©rialisation d&rsquo;un attribut @OneToMany dans Jackson √† cause d&rsquo;une LazyInitializationException
<ul>
<li>Utiliser la m√©thode MutableUtil.getMutable dans le getter</li>
</ul>
</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
          </section>
        </div>
      </main>
    </div>
    <script src="/js/clipboard.min.js?1735483912" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1735483912" defer></script>
    <script src="/js/theme.js?1735483912" defer></script>
  </body>
</html>

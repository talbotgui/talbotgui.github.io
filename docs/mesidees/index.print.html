<!DOCTYPE html>
<html lang="fr-fr" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.140.1">
    <meta name="generator" content="Relearn 7.2.1+f1701957c30daae7cd133bec5a7968480563ce9f">
    <meta name="description" content="Mes id√©es">
    <meta name="author" content="Guillaume TALBOT">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Mes id√©es :: Guillaume TALBOT">
    <meta name="twitter:description" content="Mes id√©es">
    <meta property="og:url" content="https://talbotgui.github.io/mesidees/index.html">
    <meta property="og:site_name" content="Guillaume TALBOT">
    <meta property="og:title" content="Mes id√©es :: Guillaume TALBOT">
    <meta property="og:description" content="Mes id√©es">
    <meta property="og:locale" content="fr_fr">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Mes id√©es :: Guillaume TALBOT">
    <meta itemprop="description" content="Mes id√©es">
    <meta itemprop="dateModified" content="2024-12-29T15:23:22+01:00">
    <meta itemprop="wordCount" content="151">
    <title>Mes id√©es :: Guillaume TALBOT</title>
    <link href="https://talbotgui.github.io/mesidees/index.html" rel="canonical" type="text/html" title="Mes id√©es :: Guillaume TALBOT"><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

    <link href="/css/fontawesome-all.min.css?1735484693" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1735484693" rel="stylesheet"></noscript>
    <link href="/css/auto-complete.css?1735484693" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1735484693" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1735484693" rel="stylesheet">
    <link href="/css/theme.min.css?1735484693" rel="stylesheet">
    <link href="/css/format-print.min.css?1735484693" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='https:\/\/talbotgui.github.io';
      window.relearn.min = `.min`;
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.relearn.themevariants = [ 'blue', 'relearn-light', 'relearn-dark' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant");
        var select = document.querySelector("#R-select-variant");
        if (select) {
          select.value = variant;
        }
      }
      window.relearn.initVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script><style>
    :root {
         
        --MAIN-WIDTH-MAX: 1000rem;
    }

     
    footer {
        border-top: solid 1px;
    }
</style>
  </head>
  <body class="mobile-support print" data-url="/mesidees/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/index.html"><span itemprop="name">Guillaume TALBOT</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Mes id√©es</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/mesidees/index.print.html" title="Print whole chapter (CTRL&#43;ALT&#43;p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/index.html" title="Guillaume TALBOT (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/mesidees/01-dettetechnique/index.html" title="Dette technique (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable mesidees" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="mes-id√©es">Mes id√©es</h1>

<p>Cette partie du site contient des r√©sum√©s d&rsquo;articles, des opinions, des astuces et des guides sur des sujets tr√®s divers :</p>
<ul>
<li>
<p><a href="/mesidees/02-pratiques/index.html">liens vers des pratiques utiles</a></p>
</li>
<li>
<p>industrialisation</p>
<ul>
<li><a href="/mesidees/01-dettetechnique/index.html">dette technique</a></li>
<li><a href="/mesidees/06-relecturedecode/index.html">relecture de code</a></li>
<li><a href="/mesidees/14-qualimetrie/index.html">qualim√©trie</a></li>
<li><a href="/mesidees/13-pipeline/index.html">int√©gration Continue - pipeline</a></li>
<li><a href="/mesidees/10-guidedudev/index.html">guide du d√©veloppeur</a></li>
<li><a href="/mesidees/17-installationserveuric/index.html">installation d&rsquo;un serveur pour une IC</a></li>
</ul>
</li>
<li>
<p>d√©veloppement - langages / outils</p>
<ul>
<li><a href="/mesidees/04-consolehibernate/index.html">cr√©er une console Hibernate</a></li>
<li><a href="/mesidees/12-eclipse/index.html">Eclipse</a></li>
<li><a href="/mesidees/15-js/index.html">quelques incontournables de JS</a></li>
<li><a href="/mesidees/16-angular">Angular</a></li>
<li><a href="/mesidees/19-git/index.html">Git Cheat Sheet</a></li>
</ul>
</li>
<li>
<p>d√©veloppement - pratiques &amp; patterns</p>
<ul>
<li><a href="/mesidees/03-testsdedeveloppement/index.html">tests de d√©veloppement</a></li>
<li><a href="/mesidees/10-guidedudev/index.html">guide du d√©veloppeur</a></li>
<li><a href="/mesidees/09-objectmother/index.html">object mother - comment cr√©er des jeux de donn√©es dans un test</a></li>
<li><a href="/mesidees/11-programmationdefensive/index.html">programmation d√©fensive</a></li>
</ul>
</li>
<li>
<p>d√©veloppement - astuces &amp; frameworks</p>
<ul>
<li><a href="/mesidees/05-retryenjava/index.html">coder des r√©-essais en Java</a></li>
<li><a href="/mesidees/18-licences/index.html">gestion des licences</a></li>
</ul>
</li>
<li>
<p>documentation</p>
<ul>
<li><a href="/mesidees/10-guidedudev/index.html">guide du d√©veloppeur</a></li>
<li><a href="/mesidees/08-creationavechugo/index.html">cr√©er un site avec Hugo</a></li>
<li><a href="/mesidees/07-hugoetgithubpages/index.html">Hugo et GitHub:Pages</a></li>
</ul>
</li>
<li>
<p><a href="/mesidees/99-trucsalire/index.html">liens vers d&rsquo;autres sujets int√©ressants</a></p>
</li>
<li>
<p>site et outils √† conna√Ætre</p>
<ul>
<li><a href="https://tools.geekflare.com/tools" rel="external" target="_blank">v√©rifier le param√©trage de son site Internet</a></li>
</ul>
</li>
</ul>
<p><em>La page &lsquo;guide du d√©veloppeur&rsquo; est pr√©sente plusieurs fois dans ce menu car c&rsquo;est un √©l√©ment central de tout projet.</em></p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Mes id√©es</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="dette-technique">Dette technique</h1>

<h4 id="d√©finitions-sur-le-net">D√©finitions sur le net</h4>
<ul>
<li>Ward Cunningham (1992) : if you develop a program for a long period of time by only adding features and never reorganizing it to reflect your understanding of those features, then eventually that program simply does not contain any understanding and all efforts to work on it take longer and longer.</li>
<li>James Shore : the cumulative total of less-than-perfect design and implementation</li>
<li>Tom Poppendieck : everything that makes your code harder to change</li>
</ul>
<h4 id="ma-d√©finition">Ma d√©finition</h4>
<p>La dette technique</p>
<ul>
<li>est constitu√©e des imperfections du design et du code</li>
<li>r√©duit la productivit√© de l&rsquo;√©quipe</li>
<li>r√©duit la maintenabilit√©</li>
<li>augmente le nombre d&rsquo;erreurs (bugs dans les nouvelles fonctionnalit√©s et r√©gressions dans le code existant)</li>
<li>se mesure par l&rsquo;effort qu&rsquo;il faut pour la r√©sorber</li>
</ul>
<p>Ces imperfections/violations se s√©parent en 3 groupes :</p>
<ul>
<li>les imperfections <strong>identifi√©es et d√©lib√©r√©es</strong> : elles sont les preuves de mauvais choix fait en toute connaissance de cause. Ces choix doivent imp√©rativement donner lieu √† un plan d&rsquo;action pour r√©soudre le probl√®me. Exemple : pas de mesure de la couverture de code ni de v√©rification des exigences qui y sont li√©es dans un premier temps √† cause des d√©lais. Mais on y reviendra juste apr√®s la livraison.</li>
<li>les imperfections <strong>involontaires et relev√©es par un outil</strong> : elles sont les preuves d&rsquo;une incomp√©tence ou d&rsquo;une m√©connaissance. Exemple : les violations relev√©es par Sonar sur code &ldquo;commit√©&rdquo;. Ces violations doivent √™tre trait√©es au plus vite par leur auteur. Ainsi il apprendra de ses erreurs et ne recommencera plus.</li>
<li>les imperfections <strong>involontaires et non identifi√©es</strong> : elles sont souvent identifi√©es durant la r√©solution d&rsquo;un bug. Le probl√®me est g√©n√©ral √† tout le code mais c&rsquo;est un code en particulier qui a fait √©merger un probl√®me. Il faut alors ajouter une r√®gle de d√©veloppement sur le projet (documenter la r√®gle et l&rsquo;int√©grer dans les outils de v√©rification). Exemple : un caract√®re bizarre dans une page WEB va permettre de se rendre compte qu&rsquo;une partie des fichiers &ldquo;source&rdquo; n&rsquo;est pas en UTF8.</li>
</ul>
<p>La dette se traite en</p>
<ul>
<li>d√©finissant au plus t√¥t des r√®gles de conception, de d√©veloppement et de test</li>
<li>mettant en place des outils (sur le poste du d√©veloppeur et dans l&rsquo;int√©gration continue)</li>
<li>sensibilisant/formant les d√©veloppeurs pour qu&rsquo;ils g√©n√®rent moins de dette</li>
<li>attribuant une priorit√© √† chaque imperfection existante (ou type d&rsquo;imperfections)</li>
<li>organisant des actions de refactoring pour r√©duire le nombre d&rsquo;imperfections</li>
<li>amendant et enrichissant les r√®gles tout au long du projet</li>
</ul>
<h4 id="sources">Sources</h4>
<ul>
<li><a href="http://www.c2.com/cgi/wiki?WardExplainsDebtMetaphor" rel="external" target="_blank">Technical debt - Ward Cunningham</a></li>
<li><a href="https://www.youtube.com/watch?v=pqeJFYwnkjE" rel="external" target="_blank">Technical debt - Ward Cunningham</a></li>
<li><a href="http://martinfowler.com/bliki/TechnicalDebt.html" rel="external" target="_blank">Technical debt - Martin Fowler</a></li>
<li><a href="http://www.omg.org/news/meetings/tc/tx-14/special-events/cisq-presentations/CISQ-Seminar-2014-6-17-BILL-CURTIS-Measuring-and-Managing-Technical-Debt.pdf" rel="external" target="_blank">Measuring and managing technical debt - CAST Software</a></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="liens-sur-des-pratiques-utiles">Liens sur des pratiques utiles</h1>

<h3 id="pratiques-de-d√©veloppement-">Pratiques de d√©veloppement :</h3>
<ul>
<li><a href="http://fr.slideshare.net/redigon/refactoring-1658371" rel="external" target="_blank">Refactoring tips - Martin Fowler</a></li>
<li><a href="https://github.com/iluwatar/java-design-patterns" rel="external" target="_blank">DesignPattern avec explication et code</a></li>
</ul>
<h3 id="documentation-dune-solution-dun-langage-ou-dun-projet-">Documentation d&rsquo;une solution, d&rsquo;un langage ou d&rsquo;un projet :</h3>
<ul>
<li>Frameworks :
<ul>
<li><a href="https://github.com/syalioune/awesome-java" rel="external" target="_blank">Liste tr√®s riche de frameworks en tout genre</a></li>
<li><a href="https://github.com/google/jimfs" rel="external" target="_blank">Mock d&rsquo;un FileSystem</a></li>
<li><a href="http://selenide.org/quick-start.html" rel="external" target="_blank">Selenide - sur couche √† Selenium simplifiant l&rsquo;API</a></li>
</ul>
</li>
<li>Langages :
<ul>
<li><a href="https://medium.com/outsystems-experts/beyond-console-debugging-tricks-f7d0d7f5df4#.sea5g1fuv" rel="external" target="_blank">JS - les fonctionnalit√©s de l&rsquo;objet console</a></li>
<li><a href="http://openweb.eu.org/articles/cascade_css" rel="external" target="_blank">CSS - les r√®gles de priorit√© de la cascade</a></li>
</ul>
</li>
<li>Outils :
<ul>
<li><a href="http://asciidoctor.org/docs/asciidoctor-maven-plugin/" rel="external" target="_blank">AsciiDoctor - g√©n√©rer la documentation avec Maven</a></li>
<li><a href="https://gohugo.io/overview/introduction/" rel="external" target="_blank">Hugo</a></li>
<li><a href="http://www.bogotobogo.com/Hadoop/ELK/ELK_ElasticSearch_Logstash_Kibana4.php" rel="external" target="_blank">ELK - installation</a></li>
</ul>
</li>
</ul>
<h3 id="pratiques-tri√©s-par-m√©thodeframework-">Pratiques tri√©s par m√©thode/framework :</h3>
<ul>
<li>Scrum :
<ul>
<li>objectif de sprint</li>
<li>sprint backlog</li>
<li>product backlog</li>
<li>burn-down chart</li>
<li>DefinitionOfDone</li>
</ul>
</li>
<li>XP :
<ul>
<li>integration continue</li>
<li><a href="http://www.jamesshore.com/Agile-Book/ten_minute_build.html" rel="external" target="_blank">10 minute build</a></li>
<li>whole team (toutes les comp√©tences au m√™me endroit)</li>
<li>informative workspace (management visuel et partage des informations)</li>
<li>test-first programming</li>
<li>pair programming</li>
<li>incremental design</li>
<li>user story</li>
<li>slack (se garder du temps pour les impond√©rables, l&rsquo;am√©lioration continue, &hellip;)</li>
<li>refactoring</li>
<li>simple design</li>
<li>planning game</li>
<li>single code base (une seule branche, les autres durent moins de quelques heures)</li>
<li>shared code (le code n&rsquo;est le domaine r√©serv√© de personne, tout le monde peut contribuer √† toutes les parties)</li>
<li>code &amp; test</li>
<li>root cause analysis (corriger les bugs et faire en sorte de ne plus les reproduire)</li>
<li>real customer involvement</li>
<li>daily deployment (en prod chaque nuit)</li>
<li>pay-per-use (c&rsquo;est le meilleur feedback et il doit revenir jusqu&rsquo;√† l&rsquo;√©quipe)</li>
</ul>
</li>
<li>LEAN :
<ul>
<li>r√©duire le gaspillage</li>
<li>Int√©grer la qualit√© dans le processus de production</li>
<li>Cr√©er et am√©liorer la connaissance</li>
<li>Diff√©rer le plus tard possible les d√©cisions irr√©versibles</li>
<li>Produire rapidement une solution utile</li>
<li>Respecter les personnes</li>
<li>Optimiser le tout</li>
</ul>
</li>
<li>UP :
<ul>
<li>it√©ratif et incr√©mental pilot√© par les risques</li>
<li>g√©rer la demande par les Use Case</li>
<li>architecture par composants</li>
<li>concevoir visuellement (vue logique, vue impl√©mentation, vue comportement, vue d√©ploiement et vue utilisateur)</li>
<li>tester et v√©rifier la qualit√©</li>
<li>controler les changement</li>
<li>phases IECT</li>
</ul>
</li>
<li>Agile UP :
<ul>
<li>US plutot que UC</li>
<li>storyboard</li>
<li>Agile model driven development = Model Storm (r√©union de 30mn de conception) + TDD</li>
<li>moins de document que UP</li>
</ul>
</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="tests-de-d√©veloppement">Tests de d√©veloppement</h1>

<p>J&rsquo;en ai ras le bol de ce d√©bat st√©rile sur les tests unitaires. Chacun a sa petite d√©finition et, en fonction du contexte, utilise mal l&rsquo;adjectif unitaire.</p>
<p>D&rsquo;un c√¥t√©, les tests sont unitaires quand le SUT (System Under Test) se limite √† une classe voire une m√©thode. L&rsquo;avantage de ces tests est qu&rsquo;ils sont assez simples √† r√©diger car le code √† tester se limite √† celui de la classe (inutile de conna√Ætre le comportement de tous les autres composants du syst√®me qui peuvent √™tre mis en jeu). Le probl√®me est qu&rsquo;il faut justement arriver √† isoler le SUT et donc utiliser des techniques de bouchonnage (encore un framework que les collaborateurs du projet doivent apprendre √† ma√Ætriser).</p>
<p>De l&rsquo;autre c√¥t√©, les tests sont unitaires du moment qu&rsquo;ils participent √† la construction de l&rsquo;application durant les travaux du d√©veloppeur. Et ce quel que soit la granularit√© du SUT, que les tests soient unitaires (selon la premi√®re d√©finition), d&rsquo;int√©gration ou applicatif (de bout en bout avec tous les composants et syst√®mes externes).</p>
<p>Et si, pour se simplifier la vie, on parlait de tests de d√©veloppement utilisant des TU, TI et TA ?</p>
<p>Et l√†, on me pose la question ‚ÄúEt les tests de non-r√©gression ?‚Äù. Ma r√©ponse est simple ‚ÄúUn test de non-r√©gression a √©t√© un test de d√©veloppement mais le d√©veloppement est fini et le test est rest√©.‚Äù</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="cr√©er-une-console-hibernate">Cr√©er une console Hibernate</h1>

<p>Cr√©er une console Hibernate (JBoss Tools) sur un projet SpringBoot+JPA utilisant une HSQLDB</p>
<h2 id="les-probl√®mes">Les probl√®mes</h2>
<p>O√π se trouve la difficult√© ? Un peu partout en fait :</p>
<ul>
<li>La console Hibernate de JBoss Tools utilise encore un fichier <em>hibernate.cfg.xml</em> dont on a plus tr√®s souvent l&rsquo;habitude</li>
<li>La recherche d&rsquo;entit√©s par pr√©sence d&rsquo;annotation n&rsquo;est pas disponible (c&rsquo;est Spring qui le fait d&rsquo;habitude)</li>
<li>il faut param√©trer correctement la connexion √† une base de donn√©es HSQLDB de type FILE qui est d√©j√† d√©marr√©e dans une application WEB</li>
</ul>
<h2 id="les-solutions">Les solutions</h2>
<p>Si vous voulez ex√©cuter des requ√™tes SQL depuis votre Eclipse, cr√©ez-vous une connexion depuis la vue <em>Data Source Explorer</em>. Mais pensez bien √† ajouter <em>;readonly=true;files_readonly=true;hsqldb.lock_file=false</em> √† la fin de l&rsquo;URL de connexion.</p>
<p>Quant √† la configuration de la console Hibernate, elle demande la cr√©ation de deux fichiers :</p>
<ul>
<li><em>hibernate.properties</em> qui va rester vide</li>
<li><em>hibernate.cfg.xml</em> qui va contenir ce code</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE hibernate-configuration PUBLIC &#34;-//Hibernate/Hibernate Configuration DTD 3.0//EN&#34; &#34;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;hibernate-configuration&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;session-factory</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;sessionFactory&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;hibernate.connection.driver_class&#34;</span><span style="color:#f92672">&gt;</span>org.hsqldb.jdbcDriver<span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;hibernate.connection.password&#34;</span><span style="color:#f92672">&gt;</span>login<span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;hibernate.connection.url&#34;</span><span style="color:#f92672">&gt;</span>jdbc:hsqldb:file:C:/monCheminVersMaBaseDeDonnees/idDeMaBase;readonly=true;files_readonly=true;hsqldb.lock_file=false<span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;hibernate.connection.username&#34;</span><span style="color:#f92672">&gt;</span>username<span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;hibernate.dialect&#34;</span><span style="color:#f92672">&gt;</span>org.hibernate.dialect.HSQLDialect<span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;mapping</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;mon.package.MonEntite&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;mapping</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;mon.package.EtToutesMesAutresEntitesSansEnOublier&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/session-factory&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/hibernate-configuration&gt;</span></span></span></code></pre></div>
<p>Une fois les fichiers cr√©√©s et JBoss Tools install√© sur votre Eclipse (ne cocher que Hibernate Tools durant l&rsquo;installation), il vous reste √† :</p>
<ul>
<li>ouvrir la perspective <em>Hibernate</em> (avec le petit bouton <em>Open a perspective</em> en haut √† droite)</li>
<li>dans la vue <em>Hibernate Configurations</em>, faire un clic-droit et un <em>add Configuration&hellip;</em></li>
<li>renseigner le formulaire avec :
<ul>
<li>Nom : ce que vous voulez</li>
<li>Type : <em>Core</em></li>
<li>Hibernate version : votre version d&rsquo;Hibernate</li>
<li>Project : votre projet contenant la persistance</li>
<li>Database Connection : <em>Hibernate configured connection</em></li>
<li>Property file : le fichier pr√©c√©demment cr√©√©</li>
<li>Configuration file : le fichier pr√©c√©demment cr√©√©</li>
<li>Database dialect : HSQL</li>
</ul>
</li>
</ul>
<p>Apr√®s un petit clic sur la fl√®che √† cot√© de votre configuration pour l&rsquo;√©tendre, puis un clic sur <em>Session Factory</em>, vous devriez voir toutes vos classes persistantes.</p>
<p>Il est maintenant possible d&rsquo;ouvrir un <em>HQL Editor</em> depuis un clic droit sur la configuration.</p>
<p>A partir du m√™me endroit, il est possible de cr√©er un sch√©ma de votre mapping.</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="coder-des-r√©-essais-en-java">Coder des r√©-essais en Java</h1>

<p>La librairie <strong>guava-retrying</strong> est assez pratique pour d√©finir des m√©thodes √† r√©essayer en cas d&rsquo;√©chec.</p>
<p>Documentation : <a href="https://github.com/rholder/guava-retrying" rel="external" target="_blank">ici</a></p>
<h4 id="d√©pendance">D√©pendance</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;groupId&gt;</span>com.github.rholder<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;artifactId&gt;</span>guava-retrying<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;version&gt;</span>2.0.0<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;scope&gt;</span>test<span style="color:#f92672">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span></span></span></code></pre></div>
<h4 id="exemple">Exemple</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.Callable;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.ExecutionException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.TimeUnit;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.Assert;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.github.rholder.retry.RetryException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.github.rholder.retry.Retryer;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.github.rholder.retry.RetryerBuilder;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.github.rholder.retry.StopStrategies;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.github.rholder.retry.WaitStrategies;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testRetry</span>() <span style="color:#66d9ef">throws</span> ExecutionException, RetryException {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> nbEssais <span style="color:#f92672">=</span> 6;
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> tempsEntreDeuxEssaisEnMs <span style="color:#f92672">=</span> 500;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">final</span> Retryer<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;</span> retryer <span style="color:#f92672">=</span> RetryerBuilder.<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;</span>newBuilder()<span style="color:#75715e">//</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#a6e22e">retryIfExceptionOfType</span>(AssertionError.<span style="color:#a6e22e">class</span>).<span style="color:#a6e22e">retryIfRuntimeException</span>()<span style="color:#75715e">//</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#a6e22e">withStopStrategy</span>(StopStrategies.<span style="color:#a6e22e">stopAfterAttempt</span>(nbEssais))<span style="color:#75715e">//</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#a6e22e">withWaitStrategy</span>(WaitStrategies.<span style="color:#a6e22e">fixedWait</span>(tempsEntreDeuxEssaisEnMs, TimeUnit.<span style="color:#a6e22e">MILLISECONDS</span>))<span style="color:#75715e">//</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">final</span> Callable<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;</span> assertion <span style="color:#f92672">=</span> () <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>			Assert.<span style="color:#a6e22e">assertNotNull</span>(<span style="color:#e6db74">&#34;attendu&#34;</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>		};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		retryer.<span style="color:#a6e22e">call</span>(assertion);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="relecture-revue-et-audit-de-code">Relecture, revue et audit de code</h1>

<h4 id="ma-d√©finition">Ma d√©finition</h4>
<ul>
<li>
<p><strong>La relecture de code</strong> est le travail de tout d√©veloppeur juste avant de commiter son travail. Tous les outils de gestion de version permettent d&rsquo;afficher le contenu du commit (<em>git diff</em> par exemple). Une relecture permet de s&rsquo;assurer que les noms des composants, op√©rations, attributs, param√®tres et variables sont explicites, que les commentaires sont utiles, &hellip; Le d√©veloppeur pourra aussi en profiter pour v√©rifier que le contenu du commit correspond bien aux commentaires, qu&rsquo;aucun fichier ne sera int√©gr√© au commit pour un simple saut de ligne malencontreux, &hellip;</p>
</li>
<li>
<p><strong>La revue de code</strong> est un processus outill√© qui permet de syst√©matiser une relecture de code faite par un tiers entre la fin du d√©veloppement et l&rsquo;int√©gration du dit code dans les sources de l&rsquo;application. Le processus peut √™tre le suivant :</p>
<ul>
<li>D√®s qu&rsquo;un d√©veloppeur pousse son travail sur le repository, une demande de revue est envoy√©e √† un tiers</li>
<li>Ce dernier, en cliquant sur le lien dans le mail, se voit afficher le code √† auditer</li>
<li>L&rsquo;auditeur parcourt le code et y incruste des remarques</li>
<li>Si le r√©sultat de la revue est satisfaisant, un simple clic permet au commit d&rsquo;√™tre int√©gr√© √† la branche principale</li>
<li>Si le nombre de remarques (ou leur s√©v√©rit√©) est trop √©lev√©, une notification est envoy√©e au d√©veloppeur pour qu&rsquo;il corrige son code</li>
</ul>
</li>
<li>
<p><strong>L&rsquo;audit de code</strong> est un processus asynchrone qui consiste √† faire une relecture de code √† tout moment sur le code actuellement int√©gr√© √† une branche principale. Cette pratique est tout √† fait compatible avec les deux autres pratiques pr√©c√©dentes.</p>
</li>
</ul>
<h4 id="le-plus-important">Le plus important</h4>
<p>Attention, on parle ici de la qualit√© du code. La conception, les librairies/framework utilis√©s, &hellip; sont une autre affaire !!</p>
<p>Quelques soient les pratiques du projet (revue ou audit ou les deux), l&rsquo;√©l√©ment central et primordial est l&rsquo;√©change entre le d√©veloppeur et le relecteur. C&rsquo;est cet √©change qui est le garant du bon fonctionnement de ces pratiques !! Sans lui :</p>
<ul>
<li>le relecteur ne verra pas directement l&rsquo;utilit√© de son travail. Il s&rsquo;en lassera et fera de mauvaises relectures ;</li>
<li>le d√©veloppeur recevra une liste de remarques totalement impersonnelle. De plus, certaines remarques peuvent parfois √™tre injustifi√©es. Il faut un √©change verbal pour √©viter d&rsquo;interminables envois de mails ;</li>
<li>le relecteur et le d√©veloppeur ne pourront apprendre l&rsquo;un de l&rsquo;autre que s&rsquo;ils communiquent les yeux dans les yeux.</li>
</ul>
<h4 id="pour-se-simplifier-la-vie">Pour se simplifier la vie</h4>
<p>Certaines r√®gles de d√©veloppement sont ais√©ment v√©rifiables (avec une petite expression r√©guli√®re par exemple). Pourquoi ne pas utiliser un outil pour contr√¥ler le code ? Il existe quantit√© d&rsquo;outil de qualim√©trie pour tous les langages.
Ils ne remplacent pas la relecture humaine mais ils peuvent la simplifier en r√©duisant le nombre de r√®gles et de points d&rsquo;attention √† contr√¥ler.</p>
<h4 id="pour-aller-plus-loin">Pour aller plus loin</h4>
<p>Pour mettre en oeuvre ces bonnes id√©es en poussant l&rsquo;interaction un cran plus loin, il faudrait que le relecteur soit √† c√¥t√© du d√©veloppeur pour r√©fl√©chir avec lui. Le relecteur aurait alors la possibilit√© de faire des remarques de conception aussi. C&rsquo;est du <strong>pair programming</strong> !</p>
<h4 id="sources">Sources</h4>
<ul>
<li><a href="http://blog.8thcolor.com/en/2014/04/5-reasons-you-are-not-doing-code-reviews/" rel="external" target="_blank">5 reasons you are not doing code reviews</a></li>
<li><a href="http://phinze.github.io/2013/12/08/pairing-vs-code-review.html" rel="external" target="_blank">Pairing vs code review</a></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="hugo-et-githubpages">Hugo et GitHub:Pages</h1>

<h2 id="d√©marrage">D√©marrage</h2>
<p>Les objectifs sont :</p>
<ul>
<li>de disposer d&rsquo;un repository contenant les sources du site avec des pages en markdown</li>
<li>d&rsquo;utiliser <a href="http://gohugo.io/" rel="external" target="_blank">Hugo</a> pour r√©aliser la mise en page et g√©n√©rer le site statique</li>
<li>de d√©ployer ce site statique dans un repository <a href="https://pages.github.com/" rel="external" target="_blank">GitHub:Pages</a></li>
<li>d&rsquo;automatiser compl√®tement la g√©n√©ration et le d√©ploiement du site</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="cr√©ation-dun-site-avec-hugo">Cr√©ation d&#39;un site avec Hugo</h1>

<h2 id="la-structure">La structure</h2>
<p>Le plus simple est toujours de partir d&rsquo;une base de travail simple.
Pour cela, sont disponibles plusieurs base :</p>
<ul>
<li><a href="https://github.com/talbotgui/creation-hugo/tree/simple" rel="external" target="_blank">SIMPLE</a> : un site Hugo de 2 pages avec le th√®me <a href="https://matcornic.github.io/hugo-learn-doc/basics/what-is-this-hugo-theme/" rel="external" target="_blank">LEARN</a></li>
<li><a href="https://github.com/talbotgui/creation-hugo/tree/indus" rel="external" target="_blank">INDUS</a> : le m√™me site SIMPLE mais industrialis√© avec NPM pour d√©marrer le site sur Windows, Unix ou simplement g√©n√©rer le site</li>
<li><a href="https://github.com/talbotgui/creation-hugo/tree/search" rel="external" target="_blank">SEARCH</a> : le m√™me site INDUS avec la fonction de recherche bas√©e sur LUNR</li>
<li><a href="https://github.com/talbotgui/pages-hugo/tree/master" rel="external" target="_blank">JENKINS</a> : mon site est bas√© sur SEARCH mais automatiquement publi√© sur les GitHub:pages</li>
</ul>
<h2 id="les-astuces-√†-conna√Ætre">Les astuces √† conna√Ætre</h2>
<h4 id="hugo-en-2-mots">Hugo en 2 mots</h4>
<p>L&rsquo;id√©e d&rsquo;Hugo est de g√©n√©rer un site WEB statique avec une jolie mise en forme sans se prendre la t√™te avec la mise en forme.</p>
<p>Donc le contenu du site est cod√© en Markdown et Hugo g√©n√®re les pages WEB.</p>
<p>L&rsquo;avantage d&rsquo;un site statique est qu&rsquo;il est extr√™mement performant. Cette solution est utilis√©e en production pour g√©n√©rer des pages WEB dont la fr√©quence de modification des contenus est faible (1 √† 2 fois par jour).</p>
<h4 id="manipulation">Manipulation</h4>
<p>Le site se d√©marre en double-cliquant sur &ldquo;/bin/startServer.cmd&rdquo;. Le site est alors disponible sur l&rsquo;adresse <a href="http://localhost:1313" rel="external" target="_blank">http://localhost:1313</a>.</p>
<p>Toute modification d&rsquo;une page existante d√©clenche automatiquement son rafra√Æchissement dans le navigateur. Mais l&rsquo;ajout d&rsquo;une nouvelle page n&rsquo;est pas pris en compte √† chaud. Il faut couper le serveur et le red√©marrer.</p>
<h4 id="contenu-et-mise-en-forme">Contenu et mise en forme</h4>
<p>Les premi√®res lignes de chaque page (les fichiers &ldquo;.MD&rdquo; du r√©pertoire &ldquo;docs&rdquo;) sont des propri√©t√©s :</p>
<ul>
<li>title : le titre de la page utilis√© dans l&rsquo;onglet affichant la page mais aussi dans le menu lat√©ral de la page</li>
<li>prev : [optionnel] le chemin vers la page pr√©c√©dente qui doit toujours commencer et se finir par un &ldquo;/&rdquo;. Il est possible de naviguer par le menu mais aussi par les fl√®ches pr√©sentes √† gauche et √† droite des articles ou encore avec les fl√®ches gauche et droite du clavier.</li>
<li>next : [optionnel] le chemin vers la page suivante</li>
<li>weight : [optionnel] l&rsquo;importance de la page et donc son ordre d&rsquo;apparition dans le menu</li>
<li>chapter : [optionnel] &rsquo;true&rsquo; si la page est un chapitre. Le contenu est alors centr√© par d√©faut.</li>
</ul>
<h4 id="outil-utile">Outil utile</h4>
<p>Un site avec Hugo utilisant &ldquo;prev&rdquo; et &ldquo;next&rdquo; contient donc beaucoup de lien. Il faut les v√©rifier. Pour le faire automatiquement et rapidement, il existe des outils comme &ldquo;Broken Link Checker&rdquo;
outil de check des liens
&hellip;</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="object-mother">Object Mother</h1>

<h2 id="le-pattern-tel-quil-est-d√©fini-aujourdhui">Le pattern tel qu&rsquo;il est d√©fini aujourd&rsquo;hui</h2>
<p>Ce pattern est d√©di√© √† la cr√©ation d&rsquo;objets de donn√©es utilis√©s dans des tests cod√©s.</p>
<p>Ce pattern se base sur le pattern Factory. Il propose la cr√©ation d&rsquo;une classe dont la responsabilit√© est de cr√©er des objets.
La particularit√© de ce pattern est que les donn√©es cr√©√©es sont d√©di√©s aux tests.</p>
<p>Extraire le code de cr√©ation de ces objets am√©liore la lisibilit√© des tests (√† condition que le nom des m√©thodes de l&rsquo;ObjectMother soit explicite).
De plus, le fait d&rsquo;utiliser syst√©matiquement un jeu de donn√©es particulier permet de cr√©er des donn√©es &ldquo;famili√®res&rdquo;. Par exemple : Jean est un nouvel utilisateur, Arnaud est un utilisateur avec des droits d&rsquo;administration, &hellip;
A l&rsquo;usage, ces persona (ou leurs pendants quel que soit le type d&rsquo;objets manipul√©s : facture, usine, paie, compteur, &hellip;) finissent pas √™tre connus de tous les d√©veloppeurs. Ceci facilite la conception, le d√©veloppement et la mise au point des tests.</p>
<p>Sources :</p>
<ul>
<li><a href="http://wiki.c2.com/?ObjectMother" rel="external" target="_blank">ObjectMother sur le site C2.COM</a></li>
<li><a href="https://martinfowler.com/bliki/ObjectMother.html" rel="external" target="_blank">ObjectMother sur le blog de Martin Fowler</a></li>
<li><a href="http://blog.codeleak.pl/2014/06/test-data-builders-and-object-mother.html" rel="external" target="_blank">ObjectMother vs TestDataBuilder</a></li>
</ul>
<p>Exemples :</p>
<ul>
<li><a href="https://github.com/iluwatar/java-design-patterns/tree/master/object-mother" rel="external" target="_blank">exemple explicatif</a></li>
<li><a href="https://github.com/scribejava/scribejava/blob/master/scribejava-core/src/test/java/com/github/scribejava/core/ObjectMother.java" rel="external" target="_blank">cas concret dans une petite application</a></li>
<li><a href="https://github.com/talbotgui/mariage/blob/master/mariageMetier/src/test/java/com/github/talbotgui/mariage/metier/service/ObjectMother.java" rel="external" target="_blank">cas concret dans une petite application</a></li>
</ul>
<h2 id="les-risques-associ√©s-√†-ce-pattern">Les risques associ√©s √† ce pattern</h2>
<p>Ce pattern ne doit pas d√©riv√© en anti-pattern &ldquo;God Class&rdquo;. Un ObjectMother ne doit pas devenir un composant trop gros ni d√©pendant de trop d&rsquo;autres composants.
Pour cela, il suffit de cr√©er un ObjectMother par groupe de donn√©es (par exemple : SecuriteObjectMother, FacturationObjectMother, &hellip;).
Et pour limiter le volume de code d&rsquo;un ObjectMother, il suffit de respecter quelques r√®gles :</p>
<ul>
<li>pour cr√©er un nouveau jeu de donn√©e, il faut cr√©er une nouvelle m√©thode</li>
<li>chaque m√©thode cr√©ant des donn√©es doit utiliser une m√©thode d√©j√† existante cr√©ant un jeu de donn√©es plus simple et doit enrichir ce jeu de donn√©es</li>
<li>seul l&rsquo;ajout ou la modification d&rsquo;un attribut obligatoire peut donner lieu √† la modification d&rsquo;une m√©thode existante. Mais attention, cela n√©cessite de rev√©rifier tous les tests utilisant la m√©thode modifi√©e et les m√©thodes d√©riv√©es)</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="guide-du-d√©veloppeur">Guide Du D√©veloppeur</h1>

<p>Le Guide Du D√©veloppeur est l&rsquo;espace de partage d&rsquo;une √©quipe. Il contient toutes les informations utiles aux membres de l&rsquo;√©quipe.</p>
<p>Chaque question pos√©e par un collaborateur doit donner lieu √† un nouveau paragraphe dans le GDD.</p>
<p><strong>Il est inutile d&rsquo;imposer un guide du d√©veloppeur.</strong> Il faut le proposer et le faire adopter. C&rsquo;est un outil pour l&rsquo;√©quipe construit par l&rsquo;√©quipe. Si personne ne le consulte avant de se mettre en qu√™te d&rsquo;une r√©ponse (sur Internet ou au pr√®s d&rsquo;un leader), alors il est inutile.</p>
<h2 id="astuces">Astuces</h2>
<p>La premi√®re astuce est √† destination des Lead (les membres de l&rsquo;√©quipe qui ont tout dans la t√™te). D√®s qu&rsquo;un collaborateur vient vous poser une question, demandez-lui s&rsquo;il a consult√© le GDD. Si ce n&rsquo;est pas le cas, qu&rsquo;il retourne √† son poste pour v√©rifier si la r√©ponse n&rsquo;est pas dans le GDD (m√™me si vous savez que ce n&rsquo;est pas le cas). Il faut que cela devienne un r√©flexe pour toute l&rsquo;√©quipe. Et quand il reviendra vous poser la question et qu&rsquo;il aura obtenu sa r√©ponse, d√Ætes lui d&rsquo;ajouter un paragraphe dans le GDD !!</p>
<p>Bien souvent, √† ce moment-l√†, le collaborateur vous dit qu&rsquo;il n&rsquo;a pas le temps. Pour beaucoup de gens, toutes les t√¢ches sont prioritaires √† la documentation (m√™me le caf√©). Mais il est vrai qu&rsquo;on n&rsquo;a pas toujours le temps. Pas de soucis, il vous suffit d&rsquo;un tableau blanc (ou d&rsquo;un paperBoard). A chaque r√©ponse obtenue, le collaborateur inscrit son pr√©nom ainsi que les mots clefs de sa question et de sa r√©ponse. Charge √† lui de remplir le GDD dans un d√©lai raisonnable puis de venir effacer (ou barrer) son nom.</p>
<p>Valoriser les contributeurs est aussi une bonne id√©e. Bien souvent, le dernier arriv√© sur le projet est le principal contributeur. Il est aussi celui qui doit s&rsquo;approprier le GDD. Un petit mail avec le meilleur contributeur du mois peut aider √† faire adopter le GDD.</p>
<p>Question outil, un fichier MS Word sur un serveur FTP est une solution √† proscrire car l&rsquo;√©dition √† plusieurs est impossible et la gestion des versions (avec un cartouche, &hellip;) est lourde. Un document partag√© dans une bonne GED (Gestion Electronique de Documents) est une solution. Mais le plus simple reste un WIKI ou un site statique g√©n√©r√© (comme le pr√©sent site avec Hugo). Les fonctions n√©cessaires sont :</p>
<ul>
<li>pas de prise de t√™te avec la mise en forme</li>
<li>suivi des modifications et consultation possible de l&rsquo;historique</li>
<li>simplicit√© de d√©placement des paragraphes (pour permettre la r√©organisation au fur et √† mesure que le GDD s&rsquo;√©toffe).</li>
<li>dans tous les cas :
<ul>
<li>l&rsquo;usage de l&rsquo;outil doit √™tre simple</li>
<li>un moteur de recherche doit √™tre pr√©sent</li>
<li>aucun workflow complexe (relecture, validation, &hellip;) ne doit freiner l&rsquo;enrichissement du GDD</li>
</ul>
</li>
</ul>
<p>Enfin, il n&rsquo;existe aucun mod√®le de GDD. Chaque GDD est unique car les pr√©occupations, les questions et les r√©ponses changent d&rsquo;un projet √† un autre (technologies diff√©rentes, clients diff√©rents, organisations diff√©rentes, √©quipes diff√©rentes). Il est pr√©f√©rable de d√©marrer avec une simple page faisant office de foire aux questions. Quand la page devient indigeste, il suffit de regrouper les questions par th√®me puis de les extraire dans des pages diff√©rentes. Ainsi le GDD √©mergera petit √† petit.</p>
<h2 id="id√©es-de-sujets-√†-int√©grer-au-gdd-">Id√©es de sujets √† int√©grer au GDD :</h2>
<p><strong>Ceci n&rsquo;est pas un menu de GDD mais juste une liste de sujets √† traiter sur la plus part des projets ! Votre GDD, vos questions, votre sommaire !!!</strong></p>
<ul>
<li>
<p>r√©f√©rence documentaire</p>
<ul>
<li>cahier des charges</li>
<li>dossier(s) d&rsquo;architecture</li>
<li>r√©f√©rentiel des exigences</li>
<li>r√©f√©rentiel des tests</li>
</ul>
</li>
<li>
<p>exigences</p>
<ul>
<li>quel est le niveau de d√©tails des exigences en entr√©e des d√©veloppements ?</li>
<li>quel est le contexte du projet ou de l&rsquo;application ?</li>
</ul>
</li>
<li>
<p>test</p>
<ul>
<li>quel est contractuellement le niveau de d√©tails et le formalisme √† livrer en fin de conception ?</li>
<li>strat√©gie de test du projet</li>
<li>types de tests disponibles</li>
<li>cas de test devant √™tre valid√©s en fin de d√©veloppement</li>
<li>cas de test devant √™tre cod√©s dans un composant de test (avec sa granularit√© et les outils √† utiliser)</li>
</ul>
</li>
<li>
<p>conception</p>
<ul>
<li>r√©sum√© de l&rsquo;architecture technique</li>
<li>quels sont les impacts de l‚ÄôAT sur la conception (BI, ERP ou d√©tails trop fins en xNet) ?</li>
<li>quel est le niveau de d√©tails attendu en fin de conception (peut-√™tre besoin d‚Äô√™tre plus pr√©cis que le niveau contractuel en fonction du contexte) ?</li>
<li>quels sont les outils de conception et/ou de mod√©lisation ?</li>
<li>quels sont les objectifs des mod√®les (compr√©hension, communication, ‚Ä¶) et quelle est leur dur√©e de vie ?</li>
<li>r√®gles de conception (programmation d√©fensive, @designByContrat, modularit√©, &hellip;)</li>
<li>jeu de donn√©es de test</li>
</ul>
</li>
<li>
<p>d√©veloppement</p>
<ul>
<li>r√®gles de nommage</li>
<li>liste des frameworks disponibles, leur usage et le pointeur sur leur documentation</li>
</ul>
</li>
<li>
<p>industrialisation</p>
<ul>
<li>√©l√©ments composant la Gestion de Configuration Logicielle (Git, SVN, HP ALM, Archiva, Jira, &hellip;)</li>
<li>r√®gles d&rsquo;usage de la GCL (flow GIT/SVN, snapshots dans le repository de binaires, &hellip;)</li>
<li>r√®gles d&rsquo;usage de l&rsquo;int√©gration continue</li>
<li>organisation des √©quipes en amont et en aval des d√©veloppements (Continuous Delivery)</li>
</ul>
</li>
<li>
<p>environnements</p>
<ul>
<li>installation du poste de d√©veloppement</li>
<li>liste et param√®tres des environnements de test</li>
<li>liste des environnements du client</li>
</ul>
</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="programmation-d√©fensive">Programmation d√©fensive</h1>

<p>Lorsqu&rsquo;un d√©veloppeur code une nouvelle m√©thode, il doit savoir s&rsquo;il fait confiance au code qui fera appel √† cette m√©thode. Ou pas.</p>
<ul>
<li>S&rsquo;il a confiance, il d√©clarera les conditions d&rsquo;appels √† la m√©thode dans le contrat de sa m√©thode (dans la Javadoc de sa m√©thode, dans le WSDL, ou tout autre support d&rsquo;√©change avec le client) et ne v√©rifiera pas les valeurs des param√®tres d√®s le d√©but de sa m√©thode.</li>
<li>S&rsquo;il n&rsquo;a pas confiance, les premi√®res lignes de code de la m√©thode v√©rifieront que les valeurs des param√®tres sont acceptables.
La seconde option est de la programmation d√©fensive.</li>
</ul>
<p>Une m√©thode peut valider les valeurs des param√®tres d&rsquo;entr√©e. Ce n&rsquo;est pas une mauvaise chose en soit. Bien au contraire dans le cas de la validation des donn√©es lues dans un fichier envoy√© par une application tierce. M√™me s&rsquo;il existe un contrat d√©finissant le format des donn√©es √©chang√©es, personne n&rsquo;a envie d&rsquo;int√©grer des donn√©es de mauvaise qualit√© dans son syst√®me.
Mais une question se pose : &ldquo;doit-on utiliser la programmation d√©fensive partout ?&rdquo;. L&rsquo;ajout de code v√©rifiant chaque param√®tre de chaque m√©thode de chaque composant du syst√®me co√ªte du temps de d√©veloppement (du code applicatif et des tests associ√©s). De plus chaque ligne de code ajoute potentiellement un bug dans l&rsquo;application. Et surtout la maintenabilit√© d&rsquo;une application d√©croit avec l&rsquo;augmentation du volume de code.</p>
<p>Mais il ne faut pas faire l&rsquo;amalgame entre la programmation d√©fensive et toutes les validations de donn√©es. Par exemple, la validation des donn√©es d&rsquo;un formulaire saisies par un √™tre humain est r√©alis√©e par une m√©thode dont c&rsquo;est l&rsquo;objectif. Dans ce cas, ce n&rsquo;est pas de la programmation d√©fensive. Mais, si le service m√©tier appel√© apr√®s la validation du formulaire v√©rifie lui aussi une donn√©e, l√†, ce sera de la programmation d√©fensive.</p>
<p>Le choix entre programmation d√©fensive et confiance absolue n&rsquo;est pas du seul ressort du d√©veloppeur. C&rsquo;est un choix fait par l&rsquo;√©quipe qui prend en compte le type de composant, le type de donn√©es, les contraintes techniques, &hellip; Cela doit donner lieu √† un chapitre dans le <a href="/mesidees/10-guidedudev/index.html">guide du d√©veloppeur</a>.</p>
<p>R√©f√©rences :</p>
<ul>
<li><a href="http://etienne.charignon.free.fr/spip/spip.php?article68" rel="external" target="_blank">http://etienne.charignon.free.fr/spip/spip.php?article68</a></li>
<li><a href="https://martinfowler.com/ieeeSoftware/failFast.pdf" rel="external" target="_blank">https://martinfowler.com/ieeeSoftware/failFast.pdf</a></li>
<li><a href="https://weblogs.asp.net/fredriknormen/defensive-programming-and-design-by-contract-on-a-routine-level" rel="external" target="_blank">https://weblogs.asp.net/fredriknormen/defensive-programming-and-design-by-contract-on-a-routine-level</a></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="eclipse">Eclipse</h1>

<h4 id="introduction">Introduction</h4>
<p>Eclipse est un IDE, un environnement de d√©veloppement int√©gr√©. A ce titre, il propose un √©diteur de texte et des centaines de fonctionnalit√©s autour. Bas√© sur un syst√®me de plugin, il est tr√®s extensible et tr√®s personnalisable.</p>
<p>Eclipse n&rsquo;est pas le seul IDE disponible sur le march√©. NetBeans, IntelliJ sont d&rsquo;autres solutions. Mais je ne fournirais pas de comparatif car je n&rsquo;ai que tr√®s peu utilis√© NetBeans et jamais utilis√© IntelliJ. C&rsquo;est une b√™tise (je le sais) car il est toujours int√©ressant de d√©couvrir un nouvel outil pour voir s&rsquo;il n&rsquo;est pas meilleur sur certains points.</p>
<h4 id="un-outil-malsous-utilis√©">Un outil mal/sous utilis√©</h4>
<p>Mais quel que soit l&rsquo;outil, une fois choisi, encore faut-il savoir s&rsquo;en servir !</p>
<p>Si vous utilisez un IDE √† la place de MS WordPad, il doit y avoir une raison !</p>
<ul>
<li>Alors cessez de taper chaque lettre de chaque mot de votre code et <strong>utilisez l&rsquo;auto-compl√©tion !</strong></li>
<li>Plus de mise en forme du code avec des s√©ries fr√©n√©tiques de coups sur la barre d&rsquo;espace et <strong>utilisez le formateur automatique !</strong></li>
<li>Ne recherchez pas un fichier dans l&rsquo;arborescence mais <strong>utilisez le formulaire de recherche !</strong></li>
<li>Ne compter pas le nombre de ligne depuis le d√©but du fichier mais <strong>utiliser le GoToLine</strong> (cf. raccourcis plus bas) !</li>
</ul>
<p><em>(Ces illustrations ne sont pas le fruit de mon imagination mais viennent de mes observations durant les formations Java que j&rsquo;ai dispens√©es en 2016 et 2017 aupr√®s de jeunes d√©veloppeurs)</em></p>
<h4 id="comment-apprendre-√†-utiliser-pleinement-eclipse-">Comment apprendre √† utiliser pleinement Eclipse ?</h4>
<p>A plusieurs occasions, cette question m&rsquo;a √©t√© pos√©e &ldquo;Comment apprendre √† utiliser pleinement Eclipse ?&rdquo;.</p>
<p>Ma premi√®re r√©ponse √©tait de prendre 30 √† 45 minutes pour parcourir les nombreux formulaires de param√©trage d&rsquo;Eclipse pour d√©couvrir toutes les fonctions que l&rsquo;outil propose :
<a href="#R-image-b5ec884a01e22f85b0100afaaa0299f5" class="lightbox-link"><img alt="eclipse-mousefeed" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/images/eclipse-preferences.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b5ec884a01e22f85b0100afaaa0299f5"><img alt="eclipse-mousefeed" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/images/eclipse-preferences.png"></a></p>
<p>Oui, en effet, il existe un tr√®s grand nombre de formulaires de param√©trage. Non, vous n&rsquo;utiliserez certainement jamais toutes les fonctionnalit√©s de l&rsquo;outil mais il faut en conna√Ætre un minimum.</p>
<p>Derni√®rement (en mai 2017), un coll√®gue m&rsquo;a fait d√©couvrir MouseFeed. Ce plugin d&rsquo;Eclipse, au clic sur un bouton ou un menu contextuel, affiche quelques instants le raccourci clavier
<a href="#R-image-1120d3bf548697eaac972370ca8ed164" class="lightbox-link"><img alt="eclipse-mousefeed" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/images/eclipse-mousefeed.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1120d3bf548697eaac972370ca8ed164"><img alt="eclipse-mousefeed" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/images/eclipse-mousefeed.png"></a></p>
<h4 id="les-raccourcis-√†-conna√Ætre">Les raccourcis √† conna√Ætre</h4>
<p>Le minimum du minimum :</p>
<ul>
<li>Dans Eclipse en g√©n√©ral :
<ul>
<li><strong>Shift + Ctrl + T</strong> pour la recherche d&rsquo;une classe (d&rsquo;un Type)</li>
<li><strong>Shift + Ctrl + R</strong> pour la recherche d&rsquo;un fichier quel que soit son extension (d&rsquo;une Ressource)</li>
</ul>
</li>
<li>Dans un √©diteur de code Java
<ul>
<li><strong>F3</strong> pour se d√©placer √† la d√©claration d&rsquo;une variable, d&rsquo;un param√®tre, d&rsquo;une m√©thode ou d&rsquo;une classe</li>
<li><strong>Ctrl + O</strong> (la lettre) pour afficher une popup listant les membres et m√©thodes et permettant de se d√©placer rapidement</li>
<li><strong>Ctrl + L</strong> pour se d√©placer √† un num√©ro de ligne dans le fichier (GoToLine)</li>
<li><strong>Shift + Ctrl + S</strong> pour sauvegarder tous les fichiers ouverts et en cours de modification</li>
</ul>
</li>
<li>Les raccourcis √† oublier gr√¢ce aux SaveActions (cf. plus bas) :
<ul>
<li>Shift + Ctrl + F pour le formatage des sources</li>
<li>Shift + Ctrl + F pour la r√©organisation des imports</li>
</ul>
</li>
<li>Les raccourcis avanc√©s :
<ul>
<li><strong>Shift + Ctrl + X</strong> pour ex√©cuter la classe en cours de modification (raccourci √† faire suivre du type d&rsquo;ex√©cution T pour JUnit, N pour TestNG, &hellip;)</li>
<li><strong>F4</strong> pour afficher la hi√©rarchie d&rsquo;une classe</li>
<li><strong>Shift + Ctrl + G</strong> pour rechercher les utilisations d&rsquo;une m√©thode</li>
</ul>
</li>
</ul>
<h4 id="les-fonctionnalit√©s-natives-indispensables">Les fonctionnalit√©s natives indispensables</h4>
<p>La premi√®re √† configurer : le formateur de code car chaque client/projet a ses contraintes. Et le formatage ne doit pas √™tre fait √† la main !!!!!!!</p>
<p>La plus belle des fonctionnalit√©s natives d&rsquo;Eclipse se nomme &ldquo;Save Actions&rdquo;.
Son but : √† chaque sauvegarde d&rsquo;une classe Java, il ex√©cute un certain nombre d&rsquo;action telle que :</p>
<ul>
<li>le formatage des sources</li>
<li>la r√©organisation des imports</li>
<li>le tri des membres et m√©thodes (ordre configurable)</li>
<li>la suppression des espaces/tabulations dans les lignes vides</li>
<li>l&rsquo;ajout du mot clef <em>final</em> syst√©matique (configurable)</li>
<li>l&rsquo;ajout du mot clef <em>this</em> syst√©matique (configurable)</li>
</ul>
<h4 id="les-plugins-tr√®s-utiles-en-fonction-des-projets">Les plugins tr√®s utiles en fonction des projets</h4>
<p>Le plugin <strong>JBoss Tools</strong> contient les <strong>Hibernate Tools</strong>.
Ce plugin permet de configurer un √©diteur de requ√™te HQL li√© √† une base de donn√©es et une configuration JPA (ou Hibernate) et permet l&rsquo;ex√©cution et le d√©bogage de requ√™tes.
(cf. <a href="/mesidees/04-consolehibernate/index.html">billet d√©crivant l&rsquo;usage de ce plugin</a>)</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="pipeline">Pipeline</h1>

<ul>
<li><a href="/mesidees/13-pipeline/index.html#d√©finition-de-l-int√©gration-continue-ic-dans-la-suite-du-chapitre">D√©finition de l&rsquo;int√©gration continue</a></li>
<li><a href="/mesidees/13-pipeline/index.html#les-actions-√†-faire-r√©aliser-par-l-ic">Les actions √† faire r√©aliser par l&rsquo;IC</a></li>
<li><a href="/mesidees/13-pipeline/index.html#comment-aller-un-tout-petit-peu-plus-loin">Comment aller un tout petit peu plus loin</a></li>
<li><a href="/mesidees/13-pipeline/index.html#d√©finition-du-continuous-delivery">D√©finition du Continuous Delivery</a></li>
</ul>
<h2 id="d√©finition-de-lint√©gration-continue-ic-dans-la-suite-du-chapitre">D√©finition de l&rsquo;Int√©gration Continue (IC dans la suite du chapitre)</h2>
<h4 id="en-une-seule-phrase">En une seule phrase</h4>
<p><strong>L&rsquo;int√©gration continue a pour objectif de valider que le code actuellement pr√©sent dans le repository de source est valide.</strong></p>
<p>La fr√©quence de la validation et m√™me la d√©finition de cette validation sont tr√®s variables d&rsquo;un projet √† un autre :</p>
<ul>
<li>la fr√©quence peut √™tre :
<ul>
<li>1 fois par jour (minimum du minimum)</li>
<li>2 fois par jour (√† 13h et √† 23h par exemple)</li>
<li>quelques fois par jour (toutes les 2 heures par exemple)</li>
<li>√† chaque commit (solution optimum)</li>
</ul>
</li>
<li>la validation peut comprendre :
<ul>
<li>la compilation et le packaging de la solution (minimum du minimum)</li>
<li>l&rsquo;ex√©cution des tests (unitaire &amp; de d√©veloppement &amp; int√©gration &amp; bout en bout &amp; non r√©gression)</li>
<li>l&rsquo;analyse de la qualit√© du code (Sonar par exemple)</li>
<li>les tests de performance (non pas pour valider les exigences de performance ou robustesse mais pour valider que les temps d&rsquo;ex√©cution des fonctionnalit√©s importantes ne se d√©gradent pas pour un jeu de donn√©es et une plateforme donn√©e)</li>
<li>les tests de s√©curit√© (lister les failles potentielles √† partir des d√©pendances de la solution)</li>
</ul>
</li>
</ul>
<h4 id="pourquoi--pour-qui-">Pourquoi ? Pour qui ?</h4>
<p>L&rsquo;erreur est humaine. Un d√©veloppeur peut, par inadvertance et tr√®s rarement (bien entendu), pousser sur le repository du code invalide (qui ne compile pas ou qui casse des tests).</p>
<p>A cet instant-l√†, le projet n&rsquo;est plus en mesure de livrer la solution. Ce qui est tr√®s g√™nant pour les projets en MCO dont le d√©lai de livraison d&rsquo;un correctif n&rsquo;est que de quelques heures. Et surtout les autres d√©veloppeurs de l&rsquo;√©quipe ne peuvent plus r√©cup√©rer les modifications pouss√©es sur le repository.</p>
<p>Il faut donc corriger cette situation au plus vite. Mais encore faut-il d√©tecter le probl√®me. <strong>L&rsquo;Int√©gration Continue est l√† pour √ßa !!</strong></p>
<h2 id="les-actions-√†-faire-r√©aliser-par-lic">Les actions √† faire r√©aliser par l&rsquo;IC</h2>
<p>Si l&rsquo;IC est capable d&rsquo;ex√©cuter des tests d&rsquo;int√©gration voire des tests de bout en bout, elle est donc capable de d√©ployer la solution sur un environnement. Pourquoi ne pas utiliser ce script/outil pour mettre √† disposition des testeurs un bouton d√©clenchant un d√©ploiement de la derni√®re version du code valide sur l&rsquo;environnement de test de leur choix ?</p>
<p>Si l&rsquo;IC peut d√©clencher n&rsquo;importe quel script/outil, pourquoi ne pas automatiser les t√¢ches r√©currentes et p√©nibles comme le d√©placement des livrables sur le serveur FTP du client ou l&rsquo;extraction de la liste des bugs corrig√©s dans une version de la solution ou extraire la liste des commits ou m√™me g√©n√©rer un bon de livraison ?</p>
<h2 id="comment-aller-un-tout-petit-peu-plus-loin">Comment aller un tout petit peu plus loin</h2>
<p>Bon, arriv√© √† ce point, qu&rsquo;a-t-on :</p>
<ul>
<li>pour les d√©veloppeurs, l&rsquo;IC v√©rifie r√©guli√®rement la validit√© du code</li>
<li>pour les testeurs, l&rsquo;IC d√©ploie une version de la solution sur l&rsquo;environnement de leur choix</li>
<li>pour le responsable de la livraison, l&rsquo;IC pr√©pare tous les livrables (ou une grande partie)</li>
</ul>
<p>Mais les analystes fonctionnels, les d√©veloppeurs et les testeurs ont des interactions plus importantes que √ßa !</p>
<ul>
<li>un analyste ne peut-il pas informer les d√©veloppeurs que son(ses) exigence(s) sont pr√™tes √† √™tre d√©velopp√©es (cf. Definition Of Ready) ?</li>
<li>un d√©veloppeur ne peut-il pas pr√©venir un autre d√©veloppeur que son code est pr√™t √† √™tre relu/revu ?</li>
<li>un relecteur ne peut-il pas informer un testeur qu&rsquo;une (ou plusieurs) exigence(s) est (sont) termin√©es (cf. Definition Of Done) et pr√™te(s) √† √™tre qualifi√©e(s) ?</li>
<li>un testeur ne peut-il informer le responsable des versions qu&rsquo;une (ou plusieurs) exigence(s) est(sont) test√©e(s) ?</li>
</ul>
<p>Et pourtant, le r√©f√©rentiel des exigences existe certainement (HP ALM par exemple), le r√©f√©rentiel des tests existe aussi (encore HP ALM par exemple) et l&rsquo;outil de revu/relecture de code est install√©. Il est certainement possible de lier tout ce petit monde.</p>
<h2 id="d√©finition-du-continuous-delivery">D√©finition du Continuous Delivery</h2>
<p>Une fois tous les membres de l&rsquo;√©quipe outill√©s, il est possible de d√©crire le processus de production de l&rsquo;√©quipe par un tuyau dans lequel entre une (ou un petit groupe d&rsquo;) exigence(s) qui encha√Æneront une s√©rie d&rsquo;√©tapes jusqu&rsquo;√† √™tre termin√©es.</p>
<p>Ce processus d√©pend totalement de l&rsquo;√©quipe mais commence toujours avec une exigence (ou un petit paquet). Donc la premi√®re √©tape est toujours la description de cette (ces) exigence(s). Peuvent suivre, la conception d√©taill√©e, le d√©veloppement, la qualification interne, la recette client, le d√©ploiement en pr√©-production puis celui en production.</p>
<p>Certaines √©quipes vont y ajouter de la relecture de code ou des revues de conception ou arr√™ter leur pipeline √† la livraison de leur client (s&rsquo;ils ne g√®rent pas ni la recette ni la production).</p>
<p>Et enfin, chaque exigence ne donnant pas lieu √† une mise en production, s&rsquo;ajouteront des √©tapes conditionn√©es par une promotion manuelle : une action manuelle qui autorisera une instance du pipeline √† avancer.</p>
<p>Voici un exemple de Pipeline tr√®s simple et tr√®s singulier : le pipeline de mon projet personnel <a href="/mesprojets/mariage-guidededev/index.html">&lsquo;Mariage&rsquo;</a>
<a href="#R-image-b376504c163bc6e560fe0fcd8b070566" class="lightbox-link"><img alt="pipeline-jenkinsSimple" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/images/pipeline-jenkinsSimple.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b376504c163bc6e560fe0fcd8b070566"><img alt="pipeline-jenkinsSimple" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/images/pipeline-jenkinsSimple.png"></a></p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="qualim√©trie">Qualim√©trie</h1>

<p>La Qualim√©trie est la mesure de la qualit√© d&rsquo;un projet.</p>
<h2 id="le-probl√®me-qui-se-pose-avant-de-parler-de-qualim√©trie">Le probl√®me qui se pose avant de parler de qualim√©trie.</h2>
<p>Or, qualit√© veut tout et rien dire. Donc, ici, je vais me limiter √† la qualit√© du code.</p>
<p>Mais pour √©valuer le code d&rsquo;un projet, encore faut-il qu&rsquo;il existe des r√®gles de conception/d√©veloppement sur le projet. Sans r√®gle, il ne peut y avoir de qualit√©.</p>
<p><strong>Et oubliez l&rsquo;expression <em>&ldquo;les standards de qualit√©&rdquo;</em> !!!</strong> Vous en voulez des standards ? On prend les r√®gles de d√©veloppement de SUN ? Ou celles d&rsquo;Eclipse ? Ou les r√®gles de nommage de la convention JavaBean ? Ou celles du client (s&rsquo;il en a d√©fini et qu&rsquo;elles ne sont pas obsol√®tes) ?</p>
<p>Donc, par piti√©, que chaque projet d√©finisse ses r√®gles ! En s&rsquo;appuyant sur des √©l√©ments existants bien entendu et sans red√©couvrir la roue !</p>
<p><strong>A partir de l√†, on peut commencer √† mesurer la qualit√© du code.</strong></p>
<h2 id="pourquoi-faire">Pourquoi faire</h2>
<p><em>&ldquo;La qualit√© ne sert √† rien.&rdquo;</em> Si vous le pensez, quittez ce site !</p>
<p>Vous continuez √† lire. Tant mieux. D√©sol√© de para√Ætre dur mais il n&rsquo;est pas acceptable d&rsquo;ignorer la qualit√© d&rsquo;un projet.
Elle peut ne pas √™tre prioritaire. Mais √ßa se paiera t√¥t ou tard.</p>
<p>Pourquoi ? <strong>Car un code moche est un code compliqu√© √† faire √©voluer !</strong></p>
<p>Les d√©veloppeurs prendront des raccourcis et feront du code moche car le code est d√©j√† moche et que tout le monde le sait et s&rsquo;en moque. Et du moche dans du moche, au milieu du moche, &hellip; donnera un code incompr√©hensible, incoh√©rent et <strong>tr√®s difficile √† maintenir.</strong></p>
<p>Ce jour-l√†, appara√Ætront des bugs en pagaille et les corrections prendront de plus en plus de temps.</p>
<h2 id="que-comprend-la-qualim√©trie-de-code">Que comprend la qualim√©trie de code</h2>
<p>Les r√®gles de conception/d√©veloppement portent sur beaucoup d&rsquo;aspects du code. Donc la qualim√©trie aussi :</p>
<ul>
<li>format du code :
<ul>
<li>longueur des lignes de code,</li>
<li>longueur des lignes de commentaire,</li>
<li>nombre de lignes maximal d&rsquo;une m√©thode,</li>
<li>nombre de lignes maximal d&rsquo;une classe,</li>
<li>tabulation en espace ou non,</li>
<li>indentation</li>
<li>&hellip;</li>
</ul>
</li>
<li>lisibilit√© et compr√©hensibilit√© du code :
<ul>
<li>longueur des noms de variables/param√®tres/membres/m√©thodes/classes/interfaces/package,</li>
<li>mauvais usages des noms r√©serv√©s (i, j, T, &hellip;)</li>
<li>&hellip;</li>
</ul>
</li>
<li>complexit√© des algorithmes :
<ul>
<li>nombre maximal de boucles imbriqu√©es,</li>
<li>m√©thodes r√©cursives,</li>
<li>mauvais usages de mots clefs (<em>return</em>, <em>break</em>, <em>continue</em>, &hellip;)</li>
<li>&hellip;</li>
</ul>
</li>
<li>couverture de code
<ul>
<li>pourcentage de lignes de code test√©es</li>
<li>pourcentage de combinaisons de conditions (if, while, &hellip;) test√©es</li>
</ul>
</li>
<li>s√©curit√©</li>
<li>duplication</li>
<li>&hellip;</li>
</ul>
<h2 id="quels-outils">Quels outils</h2>
<p>L&rsquo;outil le plus connu est SonarQube.</p>
<p>Ce n&rsquo;est pas √† proprement parl√© un outil de qualim√©trie. C&rsquo;est un portail de restitution et agr√©gation des violations d√©tect√©es par d&rsquo;autres outils comme Checkstyle, FindBugs, PMD, CPD, Clover, Cobertura, &hellip; De plus, SonarQube permet d&rsquo;administrer le param√©trage de ces analyseurs et d&rsquo;ex√©cuter les analyses.</p>
<p>C&rsquo;est donc un outil tr√®s complet et indispensable !</p>
<p>SonarQube propose une <a href="https://sonarcloud.io" rel="external" target="_blank">plateforme en ligne</a>, gratuite et publique pour les projets Open Source.</p>
<h2 id="comment-d√©marrer">Comment d√©marrer</h2>
<p>Que votre projet d√©marre tout juste, ou que vous ayez d√©j√† des milliers de lignes de code, il est toujours temps de commencer √† mesurer la qualit√©.</p>
<p>Le premier objectif de la mesure est de faire un point. Est-ce une catastrophe ? Ou pas ? <strong>Attention, il faut que le param√©trage des outils d&rsquo;analyse corresponde √† vos r√®gles !!</strong> Si vous prenez le param√©trage par d√©faut de SUN sur votre projet sans l&rsquo;adapter √† votre contexte, vous obtiendrez des milliers de violations.</p>
<p>Vous avez votre premi√®re mesure ? Tr√®s bien ! Premi√®re chose √† faire, que la dette soit petite ou grande, <strong>ne pas la d√©grader !</strong> Surveiller les violations et, √† chaque nouveau probl√®me d√©tect√©, trouvez le d√©veloppeur, apprenez/rappelez lui les r√®gles du projet et faites-lui corriger sa coquille.</p>
<p>Une fois toute h√©morragie contenue, on peut s&rsquo;attaquer √† r√©duire les violations. Il existe plusieurs strat√©gies et deux d&rsquo;entre elles me semblent pertinentes √† mener en parall√®le :</p>
<ul>
<li>trouver, quel que soit leur s√©v√©rit√©, les violations les plus nombreuses mais corrigibles en quelques minutes (avec un outil ou un rechercher/remplacer d&rsquo;expression r√©guli√®re)
<ul>
<li>avantages : diminuer le nombre de violations rapidement et simplement</li>
<li>soucis : les d√©veloppeurs risquent d&rsquo;en recr√©er car la correction est un bon moyen d&rsquo;apprendre</li>
</ul>
</li>
<li>faire corriger, chaque semaine, par chaque d√©veloppeur, un petit lot de violations parmi les plus importantes
<ul>
<li>avantages : les violations diminueront r√©guli√®rement, les d√©veloppeurs apprendront durant les corrections, le temps pass√© √† am√©liorer le code sera r√©parti sur plusieurs personnes et plusieurs semaines</li>
<li>soucis : la qualit√© augmentera lentement (√† condition qu&rsquo;aucune h√©morragie ne subsiste), une personne aura la charge d&rsquo;analyser les rapports SonarQube pour lister les violations √† traiter chaque semaine</li>
</ul>
</li>
</ul>
<h2 id="les-travers-et-exc√®s">Les travers et exc√®s</h2>
<p>La mesure de la qualit√© doit √™tre une aide. Pas un frein !</p>
<ul>
<li>Il faut analyser et extraire uniquement les probl√®mes violant les r√®gles du projet (et uniquement elles) ;</li>
<li>SonarQube n&rsquo;est pas un outil de surveillance de la production des d√©veloppeurs : la d√©couverte d&rsquo;une violation ne doit pas donner lieu √† un lynchage public ;</li>
<li>L&rsquo;outil est au service de l&rsquo;√©quipe et non d&rsquo;un r√¢leur prenant plaisir √† critiquer le travail des autres.</li>
</ul>
<h2 id="mieux-que-surveiller-pr√©venir-">Mieux que surveiller, pr√©venir !</h2>
<p>SonarQube analyse le code pr√©sent sur le serveur h√©bergeant les sources.</p>
<p>Mais, le mieux serait qu&rsquo;un outil pr√©vienne le d√©veloppeur d√®s qu&rsquo;il code une b√™tise !</p>
<p>La r√©ponse : SonarLint ! Cet outil (sous forme de plugin dans les IDE) se connecte √† SonarQube, t√©l√©charge les r√®gles de validation et v√©rifie le code directement dans l&rsquo;environnement du d√©veloppeur.</p>
<p>Avec cet outil, si un d√©veloppeur cr√©e encore des violations, c&rsquo;est qu&rsquo;il se moque de son √©quipe. L√†, tr√®s ch√®res coll√®gues, je vous laisse lui expliquer votre point de vue entre gens courtois et polis (dans la mesure du possible ;) ).</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="js">JS</h1>

<p>Quelques notes sur les incontournables choses √† conna√Ætre en JS.</p>
<p>Au sommaire :</p>
<ul>
<li><a href="/mesidees/15-js/index.html#les-6-falsies">Les 6 falsies</a></li>
<li><a href="/mesidees/15-js/index.html#les-param√®tres-par-d√©faut">Les param√®tres par d√©faut</a></li>
<li><a href="/mesidees/15-js/index.html#les-d√©clarations-de-variables">Les d√©clarations de variables</a></li>
<li><a href="/mesidees/15-js/index.html#d√©claration-des-scripts-dans-une-page-html">D√©claration des scripts dans une page HTML</a></li>
<li><a href="/mesidees/15-js/index.html#les-exceptions-en-js">Les exceptions en JS</a></li>
<li><a href="/mesidees/15-js/index.html#d√©clarer-une-classe">D√©clarer une classe</a></li>
<li><a href="/mesidees/15-js/index.html#utiliser-des-getter-setter-en-js">Utiliser des getter / setter en JS</a></li>
<li><a href="/mesidees/15-js/index.html#d√©clarer-un-module-encapsulant-du-code">D√©clarer un module encapsulant du code</a></li>
</ul>
<h4 id="les-6-falsies">Les 6 falsies</h4>
<ul>
<li>false</li>
<li>0</li>
<li>&rsquo;&rsquo; ou &quot;&quot; string de length 0</li>
<li>NaN</li>
<li>undefined</li>
<li>null</li>
</ul>
<p>Astuce :</p>
<ul>
<li><em>!!maVariable</em> permet de r√©cup√©rer un booleen TRUE si la valeur de la variable n&rsquo;est pas l&rsquo;un des falsies</li>
<li><em>a &amp;&amp; b</em> renvoie <strong>a</strong> s&rsquo;il est un falsie et <strong>b</strong> sinon</li>
<li><em>a || b</em> renvoie <strong>a</strong> s&rsquo;il n&rsquo;est pas un falsie et <strong>b</strong> sinon</li>
</ul>
<h4 id="les-param√®tres-par-d√©faut">Les param√®tres par d√©faut</h4>
<p>function toto(a = 1, b = 2) { return a * b; }</p>
<h4 id="les-d√©clarations-de-variables">Les d√©clarations de variables</h4>
<ul>
<li><em>const</em> permet la d√©claration d&rsquo;une variable non r√©-affectable (le <em>final</em> de Java)</li>
<li><em>let</em> permet de d√©clarer une variable dans un scope pr√©cis (sans √©craser une variable du m√™me nom dans le scope parent)</li>
<li><em>var</em> est et reste la d√©claration de variables de l&rsquo;√©poque mais ne devrait plus √™tre utilis√©.</li>
</ul>
<p>une belle explication <a href="http://putaindecode.io/fr/articles/js/es2015/const-let-var/" rel="external" target="_blank">ici</a></p>
<h4 id="d√©claration-des-scripts-dans-une-page-html">D√©claration des scripts dans une page HTML</h4>
<p>Un JS ne doit pas √™tre d√©clar√© dans le head mais √† la fin du body (<a href="https://openclassrooms.com/courses/bonnes-pratiques-javascript" rel="external" target="_blank">source 1</a>, <a href="https://www.alsacreations.com/astuce/lire/916-librairie-javascript-jquery-script.html" rel="external" target="_blank">source2</a>).</p>
<p>Au pire, si le JS ne d√©pend d&rsquo;aucun autre, il peut √™tre charg√© avec ASYNC. Mais attention aux d√©pendances entre scripts d&rsquo;une m√™me page (<a href="https://www.alsacreations.com/astuce/lire/1562-script-attribut-async-defer.html" rel="external" target="_blank">source</a>).</p>
<h4 id="les-exceptions-en-js">Les exceptions en JS</h4>
<p>He oui, √ßa existe. Mais c&rsquo;est p√©nalisant en performance. Donc √† utiliser avec mod√©ration.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">throw</span> {<span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;monException&#34;</span>, <span style="color:#e6db74">&#34;message&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;momMessage&#34;</span>};
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h4 id="d√©clarer-une-classe">D√©clarer une classe</h4>
<p>solution 1 : la fonction</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">MaClasse</span>(<span style="color:#a6e22e">args</span>){
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">prop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">args</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">maMethode</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">prop</span>);
</span></span><span style="display:flex;"><span>	};
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">monInstance</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">MaClasse</span>(<span style="color:#66d9ef">true</span>, <span style="color:#e6db74">&#34;bonjour&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">monInstance</span>.<span style="color:#a6e22e">maMethode</span>();</span></span></code></pre></div>
<p>solution 2 : la description</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">monInstance</span> <span style="color:#f92672">=</span>  {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">prop</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">args</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">maMethode</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">prop</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>solution 3 : le prototype</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">MaClasse</span>(<span style="color:#a6e22e">args</span>){ ... }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">MaClasse</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">prop</span> <span style="color:#f92672">=</span> ...;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">MaClasse</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">maMethode</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() { <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">prop</span>); };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">monInstance</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">MaClasse</span>(<span style="color:#66d9ef">true</span>, <span style="color:#e6db74">&#34;bonjour&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">monInstance</span>.<span style="color:#a6e22e">maMethode</span>();</span></span></code></pre></div>
<p>solution 4 : l&rsquo;h√©ritage</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Type Rectangle avec une largeur et une longueur
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Rectangle</span>(<span style="color:#a6e22e">largeur</span>, <span style="color:#a6e22e">longueur</span>) {  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">largeur</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">largeur</span>; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">longueur</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">longueur</span>; };
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Rectangle</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">largeur</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Rectangle</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">longueur</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Rectangle</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">calculSurface</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() { <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">largeur</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">longueur</span>; };
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Type Carre avec une largeur (la longueur et la largeur sont √©gales)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Carre</span>(<span style="color:#a6e22e">largeur</span>) { <span style="color:#a6e22e">Rectangle</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>, <span style="color:#a6e22e">largeur</span>, <span style="color:#a6e22e">largeur</span>); };
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Carre</span>.<span style="color:#a6e22e">prototype</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#a6e22e">Rectangle</span>.<span style="color:#a6e22e">prototype</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Carre</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">constructor</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Carre</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Test du Rectangle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">monRec</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rectangle</span>(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">surfaceMonRec</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">monRec</span>.<span style="color:#a6e22e">calculSurface</span>(); <span style="color:#75715e">//30
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Test du Carre
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">monCarre</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Carre</span>(<span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">surfaceMonCarre</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">monCarre</span>.<span style="color:#a6e22e">calculSurface</span>(); <span style="color:#75715e">//25
</span></span></span></code></pre></div>
<h4 id="utiliser-des-getter--setter-en-js">Utiliser des getter / setter en JS</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">monInstance</span> <span style="color:#f92672">=</span>  {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">get</span> <span style="color:#a6e22e">prop</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> ...;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">set</span> <span style="color:#a6e22e">prop</span>(<span style="color:#a6e22e">value</span>) {
</span></span><span style="display:flex;"><span>		...
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Si le getter n&rsquo;existe pas, la valeur retourn√©e est <em>undefined</em></p>
<h4 id="d√©clarer-un-module-encapsulant-du-code">D√©clarer un module encapsulant du code</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">MonModule</span> <span style="color:#f92672">=</span> ( <span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// priv√©
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">compteur</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">18</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">maMethodePrivee</span>() {
</span></span><span style="display:flex;"><span>		...
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// public
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">module</span> <span style="color:#f92672">=</span> {};
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">methodePublique</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>		...
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">module</span>;
</span></span><span style="display:flex;"><span>})();</span></span></code></pre></div>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="installation-dun-serveur-pour-une-integration-continue">Installation d&#39;un serveur pour une Integration Continue</h1>

<h4 id="cr√©ation-de-la-machine-">Cr√©ation de la machine :</h4>
<p>Cr√©er une machine de type <em>small</em> chez Amazon EC2 avec l&rsquo;OS Ubuntu xx.xx de votre choix.</p>
<p>Dans le groupe de s√©curit√©, ouvrir les ports HTTP HTTPS SSH (ouverts √† tous)</p>
<h4 id="mise-√†-jour-de-la-plateforme-">Mise √† jour de la plateforme :</h4>
<p>Se connecter en SSH et ex√©cuter</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo apt-get update
sudo apt-get -y upgrade</code></pre></div>
<h4 id="installation-de-java-et-jenkins-">Installation de Java et Jenkins :</h4>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo apt-get -y install default-jdk
	
@see https://www.jenkins.io/doc/book/installing/linux/#weekly-release
wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -
sudo sh -c &#39;echo deb https://pkg.jenkins.io/debian binary/ &gt; /etc/apt/sources.list.d/jenkins.list&#39;
sudo apt-get update
sudo apt-get -y install jenkins</code></pre></div>
<p>Pour d√©finir le rootContext de Jenkins, ex√©cuter <code>sudo vi /etc/default/jenkins</code> et modifier la derni√®re ligne pour ajouter &ldquo;&ndash;prefix=$PREFIX&rdquo; (attention au double tirets)</p>
<p>Pour prendre en compte la modification, red√©marrer Jenkins</p>
<h4 id="installation-apache2">Installation apache2</h4>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo apt-get -y install apache2
sudo a2enmod proxy proxy_http
sudo a2enmod headers
sudo a2enmod ssl</code></pre></div>
<p>Cr√©er le fichier <code>sudo vi /etc/apache2/sites-available/monHttp.conf</code></p>
<div class="highlight wrap-code"><pre tabindex="0"><code>&lt;VirtualHost *:80&gt;
 ServerAdmin webmaster@localhost
 ServerName me.guillaumetalbot.com
 ServerAlias ci
&lt;/VirtualHost&gt;</code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo a2ensite monHttp
sudo /etc/init.d/apache2 restart</code></pre></div>
<h4 id="installation-letsencrypt">Installation LetsEncrypt</h4>
<p><em>@see <a href="https://certbot.eff.org/instructions" rel="external" target="_blank">https://certbot.eff.org/instructions</a> et s√©lectionner Apache et le bon OS</em></p>
<p><strong>Penser √† configurer le nom de domaine pour pointer sur la machine aupr√®s du DNS avant</strong></p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo snap install core; sudo snap refresh core
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot
sudo certbot --apache</code></pre></div>
<h4 id="limiter-les-informations-fournies-par-le-serveur">Limiter les informations fournies par le serveur</h4>
<p>Modifier le fichier <code>sudo vi /etc/apache2/conf-available/security.conf</code> et changer les valeurs :</p>
<ul>
<li>ServerTokens Prod</li>
<li>ServerSignature Off</li>
</ul>
<h4 id="activer-les-acc√®s-s√©curis√©s-aux-outils-">Activer les acc√®s s√©curis√©s aux outils :</h4>
<p>Modifier le fichier <code>sudo vi /etc/apache2/sites-available/monHttp-le-ssl.conf</code> et y ajouter</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>  DocumentRoot /var/www/html
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined
  ProxyRequests Off
  ProxyVia Off
  &lt;Proxy *&gt;
   Order deny,allow
   Allow from all
  &lt;/Proxy&gt;
  ProxyPreserveHost on
  ProxyPass /jenkins http://localhost:8080/jenkins nocanon
  ProxyPassReverse /jenkins http://locahost:8080/jenkins
  ProxyPassReverse /jenkins  http://me.guillaumetalbot.com/jenkins
  RequestHeader set X-Forwarded-Proto &#34;https&#34;
  RequestHeader set X-Forwarded-Port &#34;443&#34;
  AllowEncodedSlashes NoDecode

  &lt;IfModule mod_headers.c&gt;
   Header set X-Content-Type-Options nosniff
   Header set X-Permitted-Cross-Domain-Policies &#34;none&#34;
   # pour ne pas bloquer Jenkins
   # Header set Content-Security-Policy &#34;child-src &#39;none&#39;; object-src &#39;none&#39;&#34;
   # Header set X-Frame-Options DENY
   Header set X-XSS-Protection &#34;1; mode=block;&#34;
   Header set Strict-Transport-Security &#34;max-age=300; includeSubDomains; preload; always;&#34;
   Header set Public-Key-Pins &#34;pin-sha256=\&#34;base64+primary==\&#34;; pin-sha256=\&#34;base64+backup==\&#34;; max-age=5184000; includeSubDomains&#34;
  &lt;/IfModule&gt;</code></pre></div>
<p>Puis ex√©cuter :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo /etc/init.d/apache2 restart
sudo rm /var/www/html/index.html</code></pre></div>
<p>Cr√©er le fichier <code>sudo vi /var/www/html/index.html</code> avec le contenu suivant :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;meta charset=&#34;utf-8&#34; /&gt;
  &lt;meta http-equiv=&#34;refresh&#34; content=&#34;3; url=https://talbotgui.github.io&#34; /&gt;
 &lt;/head&gt;
 &lt;body&gt;
  Redirection en cours...
 &lt;/body&gt;
&lt;/html&gt;</code></pre></div>
<h4 id="configuration-jenkins-">Configuration Jenkins :</h4>
<p>Aller √† l&rsquo;adresse https://&hellip;../jenkins et suivre les instructions</p>
<h4 id="installation-email-">Installation email :</h4>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo apt-get install postfix
  me.guillaumetalbot.com
sudo vi /etc/postfix/main.cf
  myhostname = me.guillaumetalbot.com
sudo service postfix restart</code></pre></div>
<h4 id="installation-maven-">Installation Maven :</h4>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo mkdir /usr/share/m2repo
sudo chmod a+rw /usr/share/m2repo
sudo apt-get -y install maven</code></pre></div>
<p>Modifier le fichier <code>sudo vi /usr/share/maven/conf/settings.xml</code> pour d√©finir le repo local</p>
<h4 id="installation-npm--nodejs">Installation NPM &amp; NodeJS</h4>
<p>V√©rifier la derni√®re version disponible du setup et remplacer les YY (version 14 en aout 2021).</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>curl -sL https://deb.nodesource.com/setup_YY.x | sudo -E bash -
sudo apt-get install -y nodejs</code></pre></div>
<h4 id="pour-param√©trer-jenkins-avec-une-configuration-de-base">Pour param√©trer Jenkins avec une configuration de base</h4>
<p>Premier acc√®s et param√©trage de base</p>
<ul>
<li>acc√©der au portail pour la premi√®re fois</li>
<li>suivre les instructions pour se connecter en tant qu&rsquo;administrateur</li>
<li>s√©lectionner l&rsquo;installation des plugins courants</li>
</ul>
<p>Installer les plugins n√©cessaires</p>
<ul>
<li>acc√©der √† la partie &ldquo;administrer Jenkins&rdquo; puis &ldquo;gestion des plugins&rdquo;</li>
<li>dans la liste des plugins disponibles, s√©lectionner &ldquo;blue ocean&rdquo; et cliquer sur &ldquo;installer sans red√©marrer&rdquo;</li>
<li>dans la liste des plugins disponibles, s√©lectionner &ldquo;Pipeline Utility Steps&rdquo; et cliquer sur &ldquo;installer sans red√©marrer&rdquo;</li>
<li>une fois les plugins install√©s, cliquer sur la case &ldquo;red√©marrer Jenkins&rdquo; et patienter que Jenkins red√©marre</li>
</ul>
<p>D√©clarer les outils</p>
<ul>
<li>acc√©der √† la partie &ldquo;administrer Jenkins&rdquo; puis &ldquo;Configuration globale des outils&rdquo;</li>
<li>cliquer sur &ldquo;Ajouter JDK&rdquo;, d√©cocher &ldquo;installation automatique&rdquo;, saisir &ldquo;java local&rdquo; et &ldquo;/usr/lib/jvm/java-11-openjdk-amd64/&rdquo;</li>
<li>cliquer sur &ldquo;Ajouter Maven&rdquo;, d√©cocher &ldquo;installation automatique&rdquo;, saisir &ldquo;M3&rdquo; et &ldquo;/usr/share/maven/&rdquo;</li>
</ul>
<p>D√©clarer les clefs</p>
<ul>
<li>faire le tour de tous vos d√©p√¥ts et jenkinsFile pour lister les clefs n√©cessaires √† leur bon fonctionnement</li>
<li>acc√©der √† la partie &ldquo;administrer Jenkins&rdquo; puis &ldquo;Manage credentials&rdquo;</li>
<li>cliquer sur &ldquo;Jenkins&rdquo; puis &ldquo;identifiants globaux&rdquo;</li>
<li>cliquer sur &ldquo;Ajouter identifiant&rdquo; et saisir les √©lements n√©cessaires</li>
</ul>
<h4 id="publication-dapplication">Publication d&rsquo;application</h4>
<p>Si votre serveur h√©berge aussi des applications d√©ploy√©es automatiquement depuis votre Jenkins</p>
<ul>
<li>faire le tour de tous vos d√©p√¥ts et jenkinsFile pour lister les clefs n√©cessaires √† leur bon fonctionnement</li>
<li>ex√©cuter autant de fois que n√©cessaire les commandes suivantes</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo mkdir /var/www/html/xxx
sudo chmod a+rw /var/www/html/xxx</code></pre></div>
<h4 id="si-la-machine-est-de-type-tiny">Si la machine est de type <em>tiny</em></h4>
<p>La machine va manquer de RAM. Pour ajouter une partition de SWAP (dans un fichier) (<a href="http://tecadmin.net/add-swap-partition-on-ec2-linux-instance/" rel="external" target="_blank">http://tecadmin.net/add-swap-partition-on-ec2-linux-instance/</a>)</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo dd if=/dev/zero of=/var/myswap bs=1M count=2048
sudo mkswap /var/myswap
sudo swapon /var/myswap
sudo chmod 0644 /var/myswap</code></pre></div>
<h4 id="petits-outils-√†-installer">Petits outils √† installer</h4>
<p>Parmis les outils utiles dans les scripts SHELL, il faut bien souvent installer</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo apt-get -y install zip</code></pre></div>
<h4 id="les-r√©pertoires-√†-vider-pour-r√©cup√©rer-de-lespace-">Les r√©pertoires √† vider pour r√©cup√©rer de l&rsquo;espace :</h4>
<p>/var/lib/jenkins/.npm/_logs/</p>
<h4 id="notes-sur-linstallation-dun-archiva">Notes sur l&rsquo;installation d&rsquo;un Archiva</h4>
<p>Ressources :</p>
<ul>
<li>documentation : <a href="https://archiva.apache.org/docs/2.2.3/quick-start.html" rel="external" target="_blank">https://archiva.apache.org/docs/2.2.3/quick-start.html</a></li>
<li>installation : <a href="http://apache.mirrors.nublue.co.uk/archiva/2.2.3/binaries/apache-archiva-2.2.3-bin.zip" rel="external" target="_blank">http://apache.mirrors.nublue.co.uk/archiva/2.2.3/binaries/apache-archiva-2.2.3-bin.zip</a></li>
</ul>
<p>Installation :</p>
<ul>
<li>extraire le contenu de l&rsquo;archive</li>
<li>si Java9 est le JDK par d√©faut, modifier le fichier conf/wrapper.conf : <code>wrapper.java.command=C:/Program Files/Java/jdk1.8.0_151/bin/java</code></li>
<li>sous Windows, dans un interpr√©teur de commande en mode &ldquo;Admin&rdquo;, ex√©cuter <code>archiva install</code> puis <code>archiva start</code></li>
<li>Archiva sera disponible √† l&rsquo;adresse http://localhost:8080/</li>
</ul>
<h4 id="petites-commandes-pratiques-pour-entretenir-le-serveur-">Petites commandes pratiques pour entretenir le serveur :</h4>
<p>Pour rechercher les r√©pertoires prenant de la place : <code>sudo du -cha --max-depth=1 / | grep -E &quot;[0-9]M|[0-9]G&quot;</code></p>
<p>Et un petit script permettant de faire le m√©nage r√©guli√®rement :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>apt clean all
rm /var/log/**/*.gz
rm /var/log/journal/*/*-00000*.journal
rm -rf /var/lib/jenkins/workspace/*
rm -rf /var/lib/jenkins/.sonar/*
rm -rf /var/lib/jenkins/.m2/*
rm -rf /var/lib/jenkins/.npm/*</code></pre></div>
<h4 id="installation-du-cloud-sdk">Installation du Cloud SDK</h4>
<ul>
<li>documentation : <a href="https://cloud.google.com/sdk/docs/downloads-apt-get" rel="external" target="_blank">https://cloud.google.com/sdk/docs/downloads-apt-get</a></li>
</ul>
<p>Installation :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>export CLOUD_SDK_REPO=&#34;cloud-sdk-$(lsb_release -c -s)&#34;
echo &#34;deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main&#34; | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list
curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
sudo apt-get update &amp;&amp; sudo apt-get install google-cloud-sdk</code></pre></div>
<p>Connexion :</p>
<ul>
<li>cr√©er une clef depuis la console GCloud (IAM / comptes de service)</li>
<li>activer les APIs &ldquo;Cloud Resource Manager API&rdquo; et &ldquo;App Engine Admin API&rdquo; depuis la console GCloud (API / Bibliotheque)</li>
<li>d√©poser le fichier JSON sur le serveur</li>
<li>se connecter une premi√®re fois avec <code>gcloud auth activate-service-account --key-file=LE_FICHIER_JSON</code></li>
<li>ex√©cuter la commande <code>gcloud init</code> et renseigner toutes les informations</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="licence">Licence</h1>

<p>Source : <a href="https://opensource.stackexchange.com/questions/21/whats-the-difference-between-permissive-and-copyleft-licenses" rel="external" target="_blank">https://opensource.stackexchange.com/questions/21/whats-the-difference-between-permissive-and-copyleft-licenses</a></p>
<p><a href="#R-image-a2c6b52705b5a1ae29002bfeb9b0bd71" class="lightbox-link"><img alt="licences" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/images/licences.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a2c6b52705b5a1ae29002bfeb9b0bd71"><img alt="licences" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/images/licences.png"></a></p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="git">Git</h1>

<h2 id="1-les-basics-">1/ Les basics :</h2>
<p>Pour cloner un d√©pot : <code>git clone https://xxxxxxxxx</code></p>
<p>Pour ajouter une modification : <code>git add rep1/monFichier.xxx</code></p>
<p>Pour ajouter toutes les modifications : <code>git add -A</code></p>
<p>Pour annuler les ADD : <code>git reset</code></p>
<p>Pour annuler le ADD d&rsquo;un fichier : <code>git reset rep1/monFichier.xxx</code></p>
<p>Pour annuler les modifications d&rsquo;un fichier : <code>git checkout rep1/monFichier.xxx</code></p>
<p>Pour commiter : <code>git commit -m &quot;mon message&quot;</code></p>
<p>Pour commiter les fichiers modifi√©s (pas les ajouts) sans faire de ADD : <code>git commit -am &quot;mon message&quot;</code></p>
<p>Pour pousser ces commits sur le repository : <code>git push </code></p>
<p>Pour r√©cup√©rer toutes les modifications r√©alis√©es depuis le dernier PULL  : <code>git pull</code>ou  <code>git pull --rebase</code>si des commits ont √©t√© r√©alis√©s depuis le dernier PULL</p>
<p>En cas de probl√®me durant un rebase, la commande <code>git rebase --abort</code>annule tout.</p>
<h2 id="2-les-utilitaires-">2/ Les utilitaires :</h2>
<p>Pour voir le statut du d√©pot local : <code>git status</code></p>
<p>Pour voir les modifications d&rsquo;un fichier : <code>git diff rep1/monFichier.xxx</code></p>
<p>Pour voir toutes les modifications : <code>git diff</code></p>
<p>Pour obtenir les logs : <code>git log</code>ou <code>git log --pretty=oneline</code></p>
<p>Pour afficher les informations du repository distant : <code>git remote show origin </code></p>
<p>Pour sauvegarder dans un espace temporaire des modifications (sans les commiter) : <code>git stash</code></p>
<p>Pour lister les sauvegardes : <code>git stash list</code></p>
<p>Pour r√©cup√©rer la sauvegarde la plus r√©cente : <code>git stash pop</code></p>
<p>Pour annuler tous les commits locaux : <code>git reset HEAD^</code></p>
<h2 id="3-la-manipulation-dhistorique">3/ La manipulation d&rsquo;historique</h2>
<h3 id="31-squash--rename-">3.1/ squash &amp; rename :</h3>
<p>Pour modifier l&rsquo;historique sur les 5 derniers commits (√† ne faire que si aucun push n&rsquo;a √©t√© fait depuis) : <code>git rebase --interactive HEAD~5 </code></p>
<p>Dans l&rsquo;√©diteur qui s&rsquo;ouvre, remplacer les <em>pick</em> par :</p>
<ul>
<li><em>r</em> pour <em>reword</em> afin de modifier le message du commit (le nouveau message est √† saisir apr√®s avoir sauvegarder ce premier √©diteur de texte)</li>
<li><em>s</em> pour <em>squash</em> permet de fusionner le commit avec celui qui le pr√©c√®de dans le temps (et fusionne les commentaires des deux commits)</li>
<li><em>f</em> pour <em>fixup</em> qui fusionne comme le squash mais qui supprime le commentaire</li>
</ul>
<p>Pour pousser sur le repository distant un rebase qui modifie l&rsquo;historique d√©j√† pouss√© /!\ attention quand on travaille en √©quipe /!\ : <code>git push --force</code></p>
<h3 id="32-la-manipulation-dhistorique---author-">3.2/ La manipulation d&rsquo;historique - author :</h3>
<p>Pour modifier l&rsquo;auteur des commits d&rsquo;un d√©p√¥t, il est possible d&rsquo;utiliser la commande suivante :</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git filter-branch -f --env-filter <span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    GIT_AUTHOR_NAME=&#39;Guillaume TALBOT&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    GIT_AUTHOR_EMAIL=&#39;talbotgui@gmail.com&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    GIT_COMMITTER_NAME=&#39;Guillaume TALBOT&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    GIT_COMMITTER_EMAIL=&#39;talbotgui@gmail.com&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;</span> HEAD</span></span></code></pre></div>
<p>Mais, ensuite, il ne faut pas oublier de modifier l&rsquo;auteur dans le d√©p√¥t (pour ne pas recommencer la m√™me erreur) :</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config user.name <span style="color:#e6db74">&#34;Guillaume TALBOT&#34;</span>
</span></span><span style="display:flex;"><span>git config user.email <span style="color:#e6db74">&#34;talbotgui@gmail.com&#34;</span></span></span></code></pre></div>
<h2 id="4-la-manipulation-de-branches-">4/ La manipulation de branches :</h2>
<p>Pour lister les branches locales : <code>git branch</code></p>
<p>Pour passer d&rsquo;une branche √† l&rsquo;autre : <code>git checkout maBranche</code></p>
<p>Pour cr√©er et passer √† une autre branche : <code>git checkout -b maBranche</code></p>
<p>Pour supprimer une branche : <code>git branch -d maBranche</code></p>
<p>Pour afficher les diff√©rences entre deux branches : <code>git dif maBranche...lAutreBranche</code></p>
<p>Pour fusionner simplement une branche vers la branche courante : <code>git merge monAutreBranche</code></p>
<p>Pour pousser dans le master les modifications d&rsquo;une autre branche en un seul commit :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>git checkout master
git merge --no-ff maBrancheFeature</code></pre></div>
<p>Pour pousser sur le d√©pot distant toutes les branches : <code>git push --all</code></p>
<p>Pour lier une branche locale √† une branche distante existante (apr√®s avoir fait un push -all cr√©ant une branche par exemple) : <code>git branch --set-upstream-to origin/maBranche</code></p>
<h2 id="5-ajouter-un-outil-de-diff-pour-les-documents-microsoft-office">5/ Ajouter un outil de DIFF pour les documents Microsoft Office</h2>
<ul>
<li>Ajouter les lignes suivantes dans le fichier .gitconfig (vi ~/.gitconfig depuis une console gitbash) :</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>[diff]
  tool = pdiff
[difftool &#34;pdiff&#34;]
  cmd=&#34;wscript.exe \&#34;c:\\Program Files\\TortoiseSVN\\Diff-Scripts\\diff-ppt.js\&#34; \&#34;`pwd`/$REMOTE\&#34; \&#34;$LOCAL\&#34;&#34;</code></pre></div>
<ul>
<li>Pour tester, ex√©cuter la commande : <code>git difftool -Y -t pdiff maPresentation.pptx</code></li>
<li>Ajouter un alias pour appeler ce diff (dans la liste des alias existante si besoin) :</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>[alias]
    diffP = difftool -Y -t pdiff</code></pre></div>
<ul>
<li>Pour tester cet alias : <code>git diffP maPresentation.pptx</code></li>
</ul>
<h2 id="6-ajouter-deux-scripts-avec-alias-pour-activerd√©sactiver-un-proxy">6/ Ajouter deux scripts (avec alias) pour activer/d√©sactiver un proxy</h2>
<ul>
<li>Placer le script suivant dans le script <em>setGitConfigProxy.sh</em> dans le r√©pertoire d&rsquo;installation de GIT</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>git config --global http.proxy http://mon.proxy:8080
git config --global https.proxy https://mon.proxy:8080</code></pre></div>
<ul>
<li>Placer le script suivant dans le script <em>unsetGitConfigProxy.sh</em> dans le r√©pertoire d&rsquo;installation de GIT</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>git config --global --unset http.proxy
git config --global --unset https.proxy</code></pre></div>
<ul>
<li>Ex√©cuter les commandes suivantes :</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>git config --global alias.setProxy &#39;!sh $GIT_EXEC_PATH/../../../setGitConfigProxy.sh&#39;
git config --global alias.unsetProxy &#39;!sh $GIT_EXEC_PATH/../../../unsetGitConfigProxy.sh&#39;</code></pre></div>
<ul>
<li>Pour manipuler le proxy pour <em>NPM</em> et <em>MAVEN</em> depuis ces scripts, il suffit d&rsquo;ajouter les lignes suivantes :</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code># setGitConfigProxy.sh
# Proxy pour GIT
git config --global --unset http.proxy
git config --global --unset https.proxy

# Proxy pour NPM
npm config rm proxy
npm config rm https-proxy

# Proxy pour MAVEN
sed &#34;s/active&gt;true/active&gt;false/&#34; -i C:/outils/apache-maven-3.5.2/conf/settings.xml```</code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0"><code># unsetGitConfigProxy.sh
# Proxy pour GIT
git config --global http.proxy https://mon.proxy:8080
git config --global https.proxy https://mon.proxy:8080

# Proxy pour NPM
npm config set proxy https://mon.proxy:8080
npm config set https-proxy https://mon.proxy:8080

# Proxy pour MAVEN
sed &#34;s/active&gt;false/active&gt;true/&#34; -i C:/outils/apache-maven-3.5.2/conf/settings.xml</code></pre></div>
<h2 id="7-articles-utiles-">7/ Articles utiles :</h2>
<ul>
<li><a href="https://delicious-insights.com/fr/articles/bien-utiliser-git-merge-et-rebase/" rel="external" target="_blank">merge et rebase</a></li>
<li><a href="http://xcafebabe.blogspot.fr/2012/09/sexy-comparison-of-word-documents-with.html" rel="external" target="_blank">git diff de document MS Office</a></li>
<li><a href="https://www.atlassian.com/git/tutorials/atlassian-git-cheatsheet" rel="external" target="_blank">Cheat Sheet d&rsquo;Atlassian</a></li>
<li><a href="https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf" rel="external" target="_blank">Cheat Sheet de GitHub</a></li>
<li><a href="https://help.github.com/articles/removing-sensitive-data-from-a-repository/" rel="external" target="_blank">Supprimer l&rsquo;historique d&rsquo;un fichier contenant malencontreusement des donn√©es sensibles</a></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="les-diff√©rents-flow-avec-git">les diff√©rents FLOW avec Git</h1>

<h3 id="mod√®le-1--a-successful-git-branching-model">Mod√®le 1 : a-successful-git-branching-model</h3>
<p>sources :</p>
<ul>
<li><a href="http://nvie.com/posts/a-successful-git-branching-model/" rel="external" target="_blank">blog d&rsquo;origine</a></li>
<li><a href="https://blog.nathanaelcherrier.com/2016/08/03/gerer-plusieurs-versions-avec-gitflow/" rel="external" target="_blank">comment g√©rer plusieurs version</a></li>
</ul>
<h5 id="liste-des-branches-">Liste des branches :</h5>
<ul>
<li>master =&gt; la branche d√©ployable en production √† tout instant</li>
<li>develop =&gt; la branche contenant tous les d√©veloppements r√©alis√©s pour la prochaine release</li>
<li>feature_XX =&gt; la branche contenant les commits d&rsquo;une fonctionnalit√©s
<ul>
<li>initialis√©e depuis : DEVELOP</li>
<li>peut √™tre merg√©e dans : DEVELOP</li>
</ul>
</li>
<li>release_XX =&gt; la branche qui contient les commits d&rsquo;une version pr√©cise de l&rsquo;application</li>
</ul>
<h5 id="r√®gles-√†-respecter-">R√®gles √† respecter :</h5>
<ul>
<li>master :
<ul>
<li>tout commit sur le MASTER donne lieu √† un tag et un d√©ploiement en production</li>
</ul>
</li>
<li>develop :
<ul>
<li>tout d√©veloppement termin√© doit √™tre merg√© sur la branche DEVELOP</li>
</ul>
</li>
<li>feature_XX :
<ul>
<li>√† cr√©er depuis DEVELOP</li>
<li>√† merger dans DEVELOP</li>
<li>√† ne jamais pousser sur le repository ORIGIN</li>
<li>les d√©veloppeurs peuvent se synchroniser entre eux pour travailler sur une m√™me feature</li>
<li>ne pousser dans DEVELOP que quand la fonctionnalit√© est termin√©e et souhait√©e pour la prochaine version (car la branche de la prochaine version sera cr√©√©e depuis DEVELOP)</li>
</ul>
</li>
<li>release_XX :
<ul>
<li>√† cr√©er depuis DEVELOP</li>
<li>√† merger dans DEVELOP et MASTER</li>
<li>quand la plus part des fonctionnalit√©s (voire toutes) ont √©t√© int√©gr√©es dans DEVELOP, on cr√©er la branche release_XX</li>
<li>quand la release est termin√©e et valid√©e, la branche est pouss√©es dans MASTER (pour livraison) et dans DEVELOP (pour y mettre les correctifs)</li>
<li>toute correction d&rsquo;une fonctionnalit√© doit √™tre faite sur la branche release_XX</li>
</ul>
</li>
<li>hotFix_XX :
<ul>
<li>√† cr√©er depuis MASTER</li>
<li>√† merger dans DEVELOP et MASTER</li>
<li>si un bug bloquant survient, il est corrig√© dans une branche hotFix_XX</li>
<li>une fois le bug corrig√©, la branche hotFix_XX est pouss√©e dans MASTER et DEVELOP</li>
</ul>
</li>
</ul>
<h5 id="avantages-et-probl√®mes-">Avantages et probl√®mes :</h5>
<ul>
<li>~ flow complexe mais un outil existe pour en simplifier l&rsquo;usage (cf. paragraphe suivant)</li>
<li>
<ul>
<li>comment v√©rifier √† chaque instant que les branches feature_XX sont int√©grables sans conflit ni r√©gression (chacune avec DEVELOP et toutes les combinaisons de feature_XX avec DEVELOP) ?</li>
</ul>
</li>
<li>
<ul>
<li>permet des relectures de code facilement directement sur la branche feature_XX avant son int√©gration dans DEVELOP</li>
</ul>
</li>
<li>
<ul>
<li>habituellement, MASTER est la branche centrale d&rsquo;un d√©pot. Autant renommer DEVELOP en MASTER et la notion de MASTER dans ce flow n&rsquo;apporte rien car chaque commit dans MASTER donne lieu √† une branche release_XX</li>
</ul>
</li>
<li>~ qu&rsquo;entend-on par feature ? Si une branche feature_XX a une dur√©e de moins de 5 jours et qu&rsquo;on d√©marre 4-5 branches le m√™me jour (au d√©but du sprint), les conflits risquent de poser probl√®mes.</li>
<li>
<ul>
<li>ce mod√®le part du principe qu&rsquo;il n&rsquo;existe qu&rsquo;une version finale √† une instant T (le master). Or, dans une prestation de d√©veloppement d&rsquo;application par une SSII chez un client, l&rsquo;√©quipe g√®re une version en qualification interne, une en recette client et une en production (mod√®le un peu ancien mais encore tr√®s vivant). Exemple : On a une version 1.0.3 en production et une 1.1 en &ldquo;recette client&rdquo;. Donc le master est √† l&rsquo;image de la 1.1. Comment cr√©er un patch sur la vielle version ???</li>
</ul>
</li>
</ul>
<h3 id="mod√®le-1--git-flow-loutil-qui-va-avec">Mod√®le 1 : Git Flow, l&rsquo;outil qui va avec</h3>
<p>sources :</p>
<ul>
<li><a href="https://jeffkreeftmeijer.com/git-flow/" rel="external" target="_blank">introduction √† GitFlow</a></li>
<li><a href="https://blog.nathanaelcherrier.com/2016/07/11/gitflow-la-methodologie-et-la-pratique/" rel="external" target="_blank">Git Flow</a></li>
<li><a href="https://danielkummer.github.io/git-flow-cheatsheet/index.fr_FR.html" rel="external" target="_blank">cheat sheet</a></li>
<li><a href="https://github.com/petervanderdoes/gitflow-avh" rel="external" target="_blank">documentation</a></li>
</ul>
<p>Pour simplifier l&rsquo;usage de ce mod√®le, GitFlow propose de nouvelles commandes qui font les merges, les cr√©ations de branche et les cheryPick :</p>
<ul>
<li>sur le m√™me mod√®le que la console GIT, GitFlow permet d&rsquo;initialiser un repos et notamment de nommer toutes les branches du mod√®le : <code>ssh git flow init</code></li>
<li>pour cr√©er et terminer une feature_XX : <code>ssh git flow feature start maFonctionnalit√©</code> et <code>ssh git flow feature finish maFonctionnalit√©</code></li>
<li>pour cr√©er et terminer une release : <code>ssh git flow release start 0.1.0</code> et <code>ssh git flow release finish 0.1.0</code></li>
</ul>
<p>Pour traiter le probl√®me &ldquo;multi-version&rdquo; du mod√®le, gitFlow propose une fonction <code>ssh git flow support</code>. Mais la gestion des cherryPick des bugFixes est √† faire manuellement !</p>
<h5 id="avantages-et-probl√®mes--1">Avantages et probl√®mes :</h5>
<ul>
<li>
<ul>
<li>l&rsquo;outil simplifie beaucoup l&rsquo;usage du mod√®le</li>
</ul>
</li>
<li>
<ul>
<li>L&rsquo;usage de la fonction <code>ssh git flow hotfix start</code> est impossible (au risque de livrer la 1.1 en production directement).</li>
</ul>
</li>
</ul>
<h3 id="mod√®le-2-">Mod√®le 2 :</h3>
<hr>
<p>source :</p>
<ul>
<li><a href="https://barro.github.io/2016/02/a-succesful-git-branching-model-considered-harmful/" rel="external" target="_blank">critique du mod√®le 1</a></li>
</ul>
<h5 id="liste-des-branches--1">Liste des branches :</h5>
<ul>
<li>master =&gt; la branche qui accueille tous les commit de d√©veloppement</li>
<li>release_XX =&gt; une branche par livraison</li>
<li>branchesLocales =&gt; des branches que cr√©ent les d√©veloppeurs mais qu&rsquo;ils ne partagent jamais sur ORIGIN</li>
</ul>
<h5 id="r√®gles-√†-respecter--1">R√®gles √† respecter :</h5>
<ul>
<li>master :
<ul>
<li>tout les d√©veloppements sont commit√©s dans le MASTER</li>
</ul>
</li>
<li>release_XX :
<ul>
<li>la branche release_XX est cr√©√©e au moment de la livraison de l&rsquo;application (en m√™me temps que le tag)</li>
<li>toute correction d&rsquo;un bug bloquant se fait sur la branche release_XX</li>
<li>toute correction d&rsquo;un bug bloquant donne lieu √† un CHERRY PICK vers le MASTER</li>
</ul>
</li>
<li>branchesLocales :
<ul>
<li>les branches locales sont une bonne chose √† utiliser</li>
<li>mais elles doivent √™tre tr√®s r√©guli√®rement mise √† jour vis √† vis du MASTER</li>
</ul>
</li>
</ul>
<h5 id="avantages-et-probl√®mes--2">Avantages et probl√®mes :</h5>
<ul>
<li>
<ul>
<li>flow simple</li>
</ul>
</li>
<li>
<ul>
<li>pas de relecture de code possible directement depuis un outil centralis√© car les branches locales sont &ldquo;locales&rdquo;</li>
</ul>
</li>
</ul>
<h3 id="annexes-">Annexes :</h3>
<p>sources de r√©flexion :</p>
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/comparing-workflows#forking-workflow" rel="external" target="_blank">comparaison de workflow</a></li>
</ul>
<h3 id="mes-propres-questions-">Mes propres questions :</h3>
<p>Les featureBranch sont bien pratiques. Associ√©es aux PullRequest qui permettent une relecture du code, on a un bon process de relecture obligatoire.
Mais comment s&rsquo;assurer √† tout moment que ma branche featureBranch_xx n&rsquo;est pas incompatible avec la featureBranch_zzz d&rsquo;un coll√®gue ?</p>
<h3 id="a-lire-et-relire-">A lire et relire :</h3>
<ul>
<li><a href="http://martinfowler.com/bliki/MoreVersionControl.html" rel="external" target="_blank">MoreVersionControl par Martin FOWLER</a></li>
<li><a href="http://martinfowler.com/bliki/FeatureBranch.html" rel="external" target="_blank">FeatureBranch par Martin FOWLER</a></li>
<li><a href="http://martinfowler.com/bliki/BranchByAbstraction.html" rel="external" target="_blank">BranchByAbstraction par Martin FOWLER</a></li>
<li><a href="http://martinfowler.com/bliki/Subversion.html" rel="external" target="_blank">Subversion par Martin FOWLER</a></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="jenkins">Jenkins</h1>

<h5 id="liens-n√©cessaires-">Liens n√©cessaires :</h5>
<ul>
<li><a href="https://jenkins.io/" rel="external" target="_blank">site de Jenkins</a></li>
<li><a href="https://jenkins.io/doc/book/getting-started/" rel="external" target="_blank">documentation officielle</a></li>
</ul>
<h5 id="pipeline-as-code">Pipeline as code</h5>
<ul>
<li><a href="https://jenkins.io/doc/pipeline/steps/" rel="external" target="_blank">pipeline as code - step rerefence</a></li>
<li><a href="https://jenkins.io/doc/book/pipeline/development/" rel="external" target="_blank">pour ne pas commiter 100 fois une correction de JenkinsFile</a></li>
<li>pipeline syntax : une page aidant √† la cr√©ation des commandes disponible en cliquant sur le lien &ldquo;Pipeline Syntax&rdquo; pr√©sent en dessous de tout √©diteur de pipeline dans Jenkins (dans un job Pipeline ou dans l&rsquo;√©cran &ldquo;replay&rdquo; d&rsquo;un build)</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="stack-elastic">Stack Elastic</h1>

<h4 id="a-quoi-peut-servir-elastic-stack-anciennement-stask-elk">A quoi peut servir Elastic Stack (anciennement Stask ELK)</h4>
<ul>
<li>obtenir rapidement les logs d&rsquo;un serveur : pour √©viter les demandes √† l&rsquo;h√©bergeur qui, parfois et selon les contrats, peuvent demander 3 jours pour √™tre trait√©es</li>
<li>corr√©ler les logs de plusieurs serveur pour avoir une vision d&rsquo;ensemble d&rsquo;un processus m√©tier : cas classique des micro-services (dont chaque composant cr√©e ses logs) ou des syst√®mes SOA</li>
<li>d√©tecter des probl√®mes : √† partir de donn√©es de r√©f√©rence, il est possible de d√©tecter des anomalies (temps de traitement longs, consommation CPU ou m√©moire anormale) li√©es √† certains appels au syst√®me ou √©v√®nement m√©tier</li>
</ul>
<p>Dans tous les cas, avant de vouloir faire quelque chose d&rsquo;intelligent avec les donn√©es collect√©es, il faut d√©j√† avoir une id√©e des √©l√©ments √† collecter :</p>
<ul>
<li>logs applicatifs</li>
<li>logs d&rsquo;erreur</li>
<li>logs de requ√™tes HTTP</li>
<li>logs de requ√™tes SQL</li>
<li>√©tat physique de la machine (TOP en Unix)</li>
<li>&hellip;</li>
</ul>
<h4 id="infrastructure-de-la-stack-elastic">Infrastructure de la Stack Elastic</h4>
<p>Classiquement, 3 types d&rsquo;outils sont mis en oeuvre :</p>
<ul>
<li>les sondes qui r√©cup√®rent de l&rsquo;information √† leur source :
<ul>
<li>Kibana</li>
<li>Beats</li>
</ul>
</li>
<li>la base de donn√©es rassemblant toutes les informations :
<ul>
<li>ElasticSearch</li>
<li>Splunk</li>
</ul>
</li>
<li>l&rsquo;outil de visualisation des donn√©es : Kibana</li>
</ul>
<p>D&rsquo;autres outils sont aussi disponibles :</p>
<ul>
<li>Kafka qui sert de tampon entre les sondes et ElasticSearch permettant une indisponibilit√© de ce dernier (mise √† jour ou maintenance diverse).</li>
<li>X-Pack qui apporte √† la Stack des fonctionnalit√©s suppl√©mentaires (s√©curit√©, alertes, monitoring, rapports, graphiques et <em>machine learning</em>)</li>
</ul>
<h4 id="installation-sur-un-poste-windows">Installation sur un poste Windows</h4>
<ul>
<li>T√©l√©charger, depuis <a href="https://www.elastic.co/downloads" rel="external" target="_blank">le site de t√©l√©chargement d&rsquo;Elastic</a>, les outils suivants (en version ZIP pour MS Windows) :
<ul>
<li>Kibana</li>
<li>ElasticSearch</li>
<li>LogStash</li>
</ul>
</li>
<li>Extraire toutes les archives</li>
<li><em>En option</em>, installer X-Pack en ex√©cutant les commandes :
<ul>
<li>depuis le r√©pertoire d&rsquo;installation d&rsquo;ElasticSearch : <code> bin/elasticsearch-plugin install x-pack</code></li>
<li>depuis le r√©pertoire d&rsquo;installation de Kibana : <code> bin/kibana-plugin install x-pack</code></li>
</ul>
</li>
<li>Param√©trer les outils :
<ul>
<li><em>En option</em> pour r√©aliser un prototype et √©viter qu&rsquo;ElasticSearch n&rsquo;hurle en cas de probl√®me de disque (<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/disk-allocator.html" rel="external" target="_blank">source</a>) :
<ul>
<li>√©diter le fichier elasticsearch.yml</li>
<li>ajouter <code>cluster.routing.allocation.disk.threshold_enabled: false</code></li>
<li>ou ajouter <code>cluster.routing.allocation.disk.watermark.high: 99</code></li>
</ul>
</li>
</ul>
</li>
<li>D√©marrer les outils :
<ul>
<li>depuis le r√©pertoire d&rsquo;installation d&rsquo;ElasticSearch : <code> bin/elasticsearch</code></li>
<li>depuis le r√©pertoire d&rsquo;installation de Kibana : <code> bin/kibana</code></li>
</ul>
</li>
<li>Ouvrir Kibana dans <a href="http://localhost:5601" rel="external" target="_blank">un navigateur</a></li>
</ul>
<h4 id="param√©trer-une-configuration-basique">Param√©trer une configuration basique</h4>
<p>Les configurations suivantes ont √©t√© test√©es pour une version particuli√®re des outils :</p>
<ul>
<li>logstash-5.6.0</li>
<li>kibana-5.6.0-windows-x86</li>
<li>filebeat-5.6.0-windows-x86_64</li>
<li>elasticsearch-5.6.0</li>
</ul>
<p>Un fichier de logs tout b√™te dans <em>donneesSources\mesLogs.log</em></p>
<div class="highlight wrap-code"><pre tabindex="0"><code>coucou madame
bonjour monsieur
coucou monsieur
bonjour madame
hello mademoiselle
hello mademoiselle</code></pre></div>
<p>Une configuration FileBeat dans <em>configFileBeat\mesLogs_filebeat.yml</em> :</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">filebeat.prospectors</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">input_type</span>: <span style="color:#ae81ff">log</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># D√©claration des fichiers sources</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">paths</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">D:/Projets/Enedis/protoElk/donneesSources/mesLogs.log</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Pour ajouter une information dans tous les logs</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">fields</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">maSource</span>: <span style="color:#ae81ff">monFileBeat</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">output.logstash</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hosts</span>: [<span style="color:#e6db74">&#34;localhost:5043&#34;</span>]</span></span></code></pre></div>
<p>Une configuration LogStash dans <em>configLogStash\meslogs_pipeline.conf</em> :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>input {
 # Pour prendre les √©l√©ments envoy√©s par Beats
 beats { port =&gt; &#34;5043&#34; }
}

filter {

 # Petit filtre simpliste
 grok {
  match =&gt; { &#34;message&#34; =&gt; &#39;%{WORD:formulePolitesse} %{WORD:personneCiblee}&#39; }
 }
}

output {
 # Pour logger le contenu des messages uniquement dans la console de LogStash
 #stdout { codec =&gt; plain { charset =&gt; &#34;ISO-8859-1&#34; } }
 # Pour logger les messages avec leurs metadata
 stdout { codec =&gt; rubydebug }
 # Pour envoyer les logs √† ElasticSearch
 # @See https://www.elastic.co/guide/en/logstash/current/plugins-outputs-elasticsearch.html
 elasticsearch {
  hosts =&gt; [ &#34;localhost:9200&#34; ]
  # Le nom de l&#39;index doit √™tre en minuscule pour elasticsearch
  index =&gt; &#34;meslogs&#34;
  template =&gt; &#34;D:/Projets/Enedis/protoElk/configLogStash/meslogs_template.json&#34;
  template_name =&gt; &#34;meslogs&#34;
  template_overwrite =&gt; true
 }
}</code></pre></div>
<p>Un template LogStash dans <em>configLogStash\meslogs_template.json</em> :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>{
  &#34;template&#34;: &#34;meslogs&#34;,
  &#34;settings&#34;: {
     &#34;index.refresh_interval&#34;: &#34;5s&#34;
  },
  &#34;mappings&#34;: {
     &#34;_default_&#34;: {
        &#34;dynamic_templates&#34;: [
           {
              &#34;message_field&#34;: {
                 &#34;mapping&#34;: {
                    &#34;index&#34;: &#34;analyzed&#34;,
                    &#34;omit_norms&#34;: true,
                    &#34;type&#34;: &#34;string&#34;
                 },
                 &#34;match_mapping_type&#34;: &#34;string&#34;,
                 &#34;match&#34;: &#34;message&#34;
              }
           },
           {
              &#34;string_fields&#34;: {
                 &#34;mapping&#34;: {
                    &#34;index&#34;: &#34;analyzed&#34;,
                    &#34;omit_norms&#34;: true,
                    &#34;type&#34;: &#34;string&#34;,
                    &#34;fields&#34;: {
                       &#34;raw&#34;: {
                          &#34;index&#34;: &#34;not_analyzed&#34;,
                          &#34;ignore_above&#34;: 256,
                          &#34;type&#34;: &#34;string&#34;
                       }
                    }
                 },
                 &#34;match_mapping_type&#34;: &#34;string&#34;,
                 &#34;match&#34;: &#34;*&#34;
              }
           }
        ],
        &#34;properties&#34;: {
           &#34;geoip&#34;: {
              &#34;dynamic&#34;: true,
              &#34;properties&#34;: {
                 &#34;location&#34;: {
                    &#34;type&#34;: &#34;geo_point&#34;
                 }
              },
              &#34;type&#34;: &#34;object&#34;
           },
           &#34;@version&#34;: {
              &#34;index&#34;: &#34;not_analyzed&#34;,
              &#34;type&#34;: &#34;string&#34;
           }
        },
        &#34;_all&#34;: {
           &#34;enabled&#34;: true
        }
     }
  }
}</code></pre></div>
<p>Et des commandes pour d√©marrer les outils et nettoyer les r√©pertoires pour r√©p√©ter le test √† l&rsquo;infini :</p>
<ul>
<li>0-resetTouteLaChaine.cmd :</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>rmdir filebeat-5.6.0-windows-x86_64\data /Q /S

rmdir logstash-5.6.0\data /Q /S

rmdir elasticsearch-5.6.0\data /Q /S

rmdir kibana-5.6.0-windows-x86\data /Q /S</code></pre></div>
<ul>
<li>
<p>1-elasticsearch.cmd : <code>elasticsearch-5.6.0\bin\elasticsearch</code></p>
</li>
<li>
<p>2-kibana.cmd : <code> kibana-5.6.0-windows-x86\bin\kibana</code></p>
</li>
<li>
<p>3-startLogStash.cmd :</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>title Logstash

logstash-5.6.0\bin\logstash -f configLogStash/mesLogs_pipeline.conf --config.reload.automatic</code></pre></div>
<ul>
<li>4-startFileBeat.cmd :</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>title FileBeats

filebeat-5.6.0-windows-x86_64\filebeat -e -c configFileBeat/mesLogs_filebeat.yml -d &#34;publish&#34;</code></pre></div>
<p>Une fois la premi√®re ex√©cution r√©alis√©e sans erreur sur aucune console, sont disponibles :</p>
<ul>
<li><a href="http://localhost:9200/meslogs" rel="external" target="_blank">les informations de l&rsquo;index dans ElasticSearch</a></li>
<li><a href="http://localhost:5601/app/kibana" rel="external" target="_blank">les logs dans Kibana</a> apr√®s avoir ajouter l&rsquo;index <em>meslogs</em> (le formulaire d&rsquo;ajout est affich√© syst√©matiquement si aucun index n&rsquo;existe)</li>
</ul>
<p>On obtient ainsi le tableau de bord suivant (apr√®s quelques minutes de manipulation dans Kibana) :
<a href="#R-image-6dffd6f56294fbf68be739cb80d5d6b5" class="lightbox-link"><img alt="elastic-kibanaExempleSimpliste" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/images/elastic-kibanaExempleSimpliste.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6dffd6f56294fbf68be739cb80d5d6b5"><img alt="elastic-kibanaExempleSimpliste" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/images/elastic-kibanaExempleSimpliste.png"></a></p>
<h4 id="installation-sur-un-ubuntu">Installation sur un Ubuntu</h4>
<ul>
<li>Voir la <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html" rel="external" target="_blank">documentation officielle d&rsquo;ElasticSearch</a></li>
<li>Voir la <a href="https://www.elastic.co/guide/en/kibana/current/deb.html" rel="external" target="_blank">documentation officielle de Kibana</a></li>
<li>Voir la <a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-installation.html" rel="external" target="_blank">documentation de FileBeat</a></li>
<li>Voir la <a href="https://www.elastic.co/guide/en/logstash/current/installing-logstash.html" rel="external" target="_blank">documentation de LogStash</a></li>
</ul>
<h4 id="sources-dinformations-">Sources d&rsquo;informations :</h4>
<ul>
<li>Id√©es
<ul>
<li><a href="http://blog.d2-si.fr/2016/08/23/bonnes-pratiques-elastic-stack/" rel="external" target="_blank">concepts g√©n√©raux</a></li>
<li><a href="https://www.elastic.co/fr/start" rel="external" target="_blank">guide de d√©marrage d&rsquo;Elastic</a></li>
</ul>
</li>
<li>Outils
<ul>
<li><a href="https://www.elastic.co/fr/products/logstash" rel="external" target="_blank">documentation LogStash</a></li>
<li><a href="https://www.splunk.com/en_us/solutions/solution-areas/log-management.html" rel="external" target="_blank">documentation Splunk</a></li>
<li><a href="https://www.elastic.co/fr/products/kibana" rel="external" target="_blank">documentation Kibana</a></li>
<li><a href="https://www.elastic.co/fr/products/beats" rel="external" target="_blank">documentation Beats</a></li>
</ul>
</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="git-et-clefs-ssh-multiples">Git et clefs SSH multiples</h1>

<h3 id="cas-dusage">Cas d&rsquo;usage</h3>
<p>Quand on d√©veloppe √† la maison et au bureau avec Git, rapidement, apparait le besoin de disposer de plusieurs clefs SSH pour s&rsquo;authentifier aupr√®s des serveurs.</p>
<h3 id="etapes-">Etapes :</h3>
<ul>
<li>
<p>Cr√©er les clefs (en reprenant le chemin complet du fichier propos√© !!) :</p>
<ul>
<li><code>ssh-keygen -t rsa -C &quot;premier@email.com&quot;</code> avec /c/Users/xxxx/.ssh/id_rsa_boulot</li>
<li><code>ssh-keygen -t rsa -C &quot;second@email.com&quot;</code> avec /c/Users/xxxx/.ssh/id_rsa_perso</li>
</ul>
</li>
<li>
<p>Cr√©er le fichier ~/.ssh/config avec</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code># Compte perso
Host github.com
  HostName github.com
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/id_rsa_perso
# Compte boulot
Host qsd.mon.boulot
  HostName qsd.mon.boulot
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/id_rsa_boulot</code></pre></div>
<ul>
<li>
<p>Pour d√©clarer les clefs :
<code>ssh-add ~/.ssh/id_rsa_perso</code>
<code>ssh-add ~/.ssh/id_rsa_boulot</code></p>
</li>
<li>
<p>Pour d√©marrer l&rsquo;agent SSH (ou s&rsquo;assurer qu&rsquo;il fonctionne)
<code>eval `ssh-agent -s` </code></p>
</li>
<li>
<p>Supprimer le cache des clefs
<code>ssh-add -D</code></p>
</li>
</ul>
<p>Pour tester (si besoin, accepter la connexion en r√©pondant &lsquo;yes&rsquo;) :
<code>ssh -T git@github.com</code>
<code>ssh -T git@qsd.mon.boulot</code></p>
<p>ET NE PAS OUBLIER DE FAIRE DES CLONES EN UTILISANT LE PROTOCOLE SSH et non https !!!!</p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="cr√©er-un-compte-sftp-sur-aws">Cr√©er un compte sftp sur AWS</h1>

<h3 id="cr√©er-le-nouvel-utilisateur">Cr√©er le nouvel utilisateur</h3>
<p>Ex√©cuter les commandes :</p>
<ul>
<li><code>sudo adduser new_user --disabled-password</code></li>
<li><code>sudo su new_user</code></li>
<li><code>cd</code></li>
<li><code>mkdir .ssh</code></li>
<li><code>chmod 700 .ssh</code></li>
<li><code>touch .ssh/authorized_keys</code></li>
<li><code>chmod 600 .ssh/authorized_keys</code></li>
</ul>
<h3 id="s√©curiser-lacc√®s">S√©curiser l&rsquo;acc√®s</h3>
<ul>
<li>Cr√©er une paire de clef sur la console EC2 d&rsquo;AWS</li>
<li>Uploader la clef sur le serveur dans /home/ubuntu</li>
<li>La transformer en clef publique RSA : <code>ssh-keygen -f /home/ubuntu/xxx.pem -y &gt;/home/new_user/.ssh/authorized_keys</code></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="feature-toggle">Feature toggle</h1>

<p>Un tout petit billet pour r√©f√©rencer l&rsquo;article de Fowler sur ce sujet : <a href="https://martinfowler.com/articles/feature-toggles.html" rel="external" target="_blank">https://martinfowler.com/articles/feature-toggles.html</a></p>
<p>Bonnes pratiques d&rsquo;impl√©mentation des toggles √† retenir :</p>
<ul>
<li>d√©coupler l&rsquo;identifiant du toggle et le code activant (ou pas) la sous-fonctionnalit√©
<ul>
<li>remplacer <code>Festures.isFeatureActive(&quot;version-2.0&quot;)</code></li>
<li>par <code>Festures.isEnvoiMailConfirmation() { return isFeatureActive(&quot;version-2.0&quot;); }</code></li>
</ul>
</li>
<li>limiter au maximum les <code>if</code>. Si plusieurs sont n√©cessaires, il est pr√©f√©rable de faire des m√©thodes diff√©rentes voire des classes diff√©rentes.</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="installer-une-instance-wordpress-sur-ubuntu">Installer une instance WordPress sur Ubuntu</h1>

<h3 id="pr√©requis">Pr√©requis</h3>
<p>Cr√©er un serveur Ubuntu de type TINY sur Amazon Web Services avec un serveur httpd (cf. <a href="https://talbotgui.github.io/mesidees/17-installationserveuric/" rel="external" target="_blank">https://talbotgui.github.io/mesidees/17-installationserveuric/</a>)</p>
<h3 id="installer-les-outils">Installer les outils</h3>
<ul>
<li>MySQL : <code>sudo apt-get install mysql-server</code></li>
<li>PHP et ses librairies httpd :
<ul>
<li><code>sudo apt-get install php libapache2-mod-php php-mysql</code></li>
<li><code>sudo apt-get install php-curl php-gd php-mbstring php-mcrypt php-xml php-xmlrpc</code></li>
<li><code>sudo /etc/init.d/apache2 restart</code></li>
</ul>
</li>
</ul>
<h3 id="cr√©er-la-base-de-donn√©es-">Cr√©er la base de donn√©es :</h3>
<ul>
<li>se connecter √† la base : <code>mysql -u root -p</code></li>
<li>puis ex√©cuter les commandes :
<ul>
<li><code>CREATE DATABASE wordpress DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;</code></li>
<li><code>GRANT ALL ON wordpress.* TO 'wordpressuser'@'localhost' IDENTIFIED BY 'password';</code></li>
<li><code>FLUSH PRIVILEGES;</code></li>
<li><code>EXIT;</code></li>
</ul>
</li>
</ul>
<h3 id="configurer-apache-">Configurer Apache :</h3>
<ul>
<li>Configurer Apche <code>sudo vi /etc/apache2/apache2.conf</code></li>
<li>Ajouter la balise <code>AllowOverride All</code> dans &lt;Directory /var/www/html/&gt;</li>
<li>Activer le mode rewrite <code>sudo a2enmod rewrite</code></li>
<li>Red√©marrer Apache <code>sudo /etc/init.d/apache2 restart</code></li>
</ul>
<h3 id="installer-wordpress-">Installer WordPress :</h3>
<ul>
<li><code>mkdir tmp</code></li>
<li><code>cd tmp</code></li>
<li><code>curl -O https://wordpress.org/latest.tar.gz</code></li>
<li><code>tar xzvf latest.tar.gz</code></li>
<li><code>touch wordpress/.htaccess</code></li>
<li><code>chmod 660 wordpress/.htaccess</code></li>
<li><code>cp wordpress/wp-config-sample.php wordpress/wp-config.php</code></li>
<li><code>mkdir wordpress/wp-content/upgrade</code></li>
<li><code>sudo cp -a wordpress/. /var/www/html</code></li>
<li><code>sudo chown -R sammy:www-data /var/www/html</code></li>
<li>editer /var/www/html/.htaccess pour y mettre les lignes :
<ul>
<li><code>php_value upload_max_filesize 64M</code></li>
<li><code>php_value post_max_size 128M</code></li>
</ul>
</li>
<li><code>curl -s https://api.wordpress.org/secret-key/1.1/salt/</code></li>
<li>√©diter le fichier /var/www/html/wp-config.php
<ul>
<li>y remplacer les lignes d&rsquo;exemple par les lignes issue de la requ√™te</li>
<li>param√©trer la base de donn√©es</li>
</ul>
</li>
<li><code>sudo chown -R www-data:www-data /var/www/html</code></li>
<li><code>sudo find /var/www/html -type d -exec chmod g+s {} \;</code></li>
<li><code>sudo chmod g+w /var/www/html/wp-content</code></li>
<li><code>sudo chmod -R g+w /var/www/html/wp-content/themes</code></li>
<li><code>sudo chmod -R g+w /var/www/html/wp-content/plugins</code></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="git-et-les-mots-de-passe">Git et les mots de passe</h1>

<h3 id="r√©sum√©">R√©sum√©</h3>
<p>La (grande?) majorit√© des d√©veloppeurs utilisent aujourd&rsquo;hui GIT pour sauvegarder et partager leurs d√©veloppements.
Tout y est stock√©. Et, parfois, m√™me les mots de passe (clefs, secrets, &hellip;) !!</p>
<p>La solution optimale serait de ne pas les ins√©rer dans le d√©p√¥t GIT. Mais cela signifie ne plus les partager avec le reste de l&rsquo;√©quipe.</p>
<p>Une autre solution consiste √† chiffrer ces informations avant de les partager sur le repository commun sans oublier de les d√©chiffrer sur le repository local.</p>
<p>Une solution (parmis d&rsquo;autre) est <a href="https://github.com/elasticdog/transcrypt" rel="external" target="_blank">Transcrypt</a>.</p>
<h3 id="quest-ce-que-transcrypt-">Qu&rsquo;est-ce que Transcrypt ?</h3>
<p>Transcrypt est un outil permettant d&rsquo;initialiser le chiffrement de certains fichiers dans un d√©p√¥t Git.</p>
<p>Une fois le d√©p√¥t param√©tr√©, Transcrypt n&rsquo;est plus n√©cessaire et peut √™tre d√©sinstall√©.</p>
<p>La liste des fichiers √† chiffrer avant (et d√©chiffrer apr√®s) chaque commit est param√©tr√©e dans le fichier .gitattributes</p>
<h3 id="par-quoi-commencer-">Par quoi commencer ?</h3>
<p><em>La toute premi√®re chose √† faire est de faire dispara√Ætre de l&rsquo;historique GIT le fichier contenant des mots de passe !!</em>
Pour cela, il suffit d&rsquo;ex√©cuter les commandes suivantes :</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>git filter-branch -f --tree-filter &#39;rm -f projects/coupeDesMaisons/src/environments/environment.ts&#39; HEAD
git push --force</code></pre></div>
<p>/!\ Prendre le temps de tester le chemin du fichier permet de ne pas attendre la longue ex√©cution du script sans qu&rsquo;aucun commit ne soit modifi√© !</p>
<h3 id="pour-initialiser-un-d√©pot-avec-transcrypt">Pour initialiser un d√©pot avec Transcrypt</h3>
<ul>
<li>Installer Transcrypt :
<ul>
<li>Dans un r√©pertoire d&rsquo;outillage, ex√©cuter la commande suivante pour r√©cup√©rer la derni√®re version de l&rsquo;outil :
<code>git clone https://github.com/elasticdog/transcrypt.git</code></li>
<li>Ajouter le r√©pertoire nouvellement cr√©√© dans la variable d&rsquo;environnement PATH</li>
<li>Ouvrir une nouvelle invite de commande dans tout autre r√©pertoire (pour √™tre certain que la derni√®re valeur de PATH est utilis√©e)</li>
<li>Y ex√©cuter la commande pour v√©rifier que le script est bien accessible partout (l&rsquo;aide de Transcrypt doit s&rsquo;afficher)
<code>transcrypt --help</code></li>
</ul>
</li>
<li>Initialiser le chiffrement dans le d√©p√¥t :
<ul>
<li>Depuis une invite de commande, se positionner dans le r√©pertoire du d√©p√¥t √† traiter</li>
<li>Y ex√©cuter la commande
<code>transcrypt</code></li>
<li>R√©pondre aux questions pos√©es</li>
<li>Conserver le mot de passe g√©n√©r√© (ou saisi) dans votre <a href="https://keepass.fr/" rel="external" target="_blank">Keepass</a></li>
</ul>
</li>
<li>Ajouter un fichier et d√©clarer qu&rsquo;il doit √™tre chiffr√© :
<ul>
<li>Ajouter le fichier normalement :
<code>git add le/chemin/du/fichier.extension</code></li>
<li>Ajouter la ligne suivante dans le fichier .gitattributes
<code>le/chemin/du/fichier.extension filter=crypt diff=crypt merge=crypt</code></li>
</ul>
</li>
</ul>
<p>Voici un exemple pour un fichier environment d&rsquo;Angular :
<code>projects/coupeDesMaisons/src/environments/environment.prod.ts filter=crypt diff=crypt merge=crypt</code></p>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="trucs-√†-lire">Trucs √† lire</h1>

<p>Quelques trucs √† lire</p>
<ul>
<li>retour sur le piratage de TV5 Monde: <a href="http://www.dailymotion.com/video/x5qs6c0" rel="external" target="_blank">partie1</a>, <a href="http://www.dailymotion.com/video/x5qsa9g_retour-technique-de-l-incident-de-tv5monde-2-audits-la-remediation-et-la-reconstruction_tech" rel="external" target="_blank">partie2</a></li>
<li><a href="https://secnumacademie.gouv.fr/" rel="external" target="_blank">le MOOC sur la s√©curit√© informatique propos√©e par le gouvernement</a></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:talbotgui@gmail.com">Guillaume TALBOT</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 29, 2024
  </footer>
</article>
          </section>
        </div>
      </main>
    </div>
    <script src="/js/clipboard.min.js?1735484693" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1735484693" defer></script>
    <script src="/js/theme.js?1735484693" defer></script>
  </body>
</html>
